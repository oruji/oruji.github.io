<!DOCTYPE html>
<html dir="rtl" lang="fa">


<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-43783552-5"></script>
<script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config','UA-43783552-5');</script>
<link rel="canonical" href="https://oruji.github.io/django/model/advance/" />
<link rel="shortcut icon" href="https://oruji.github.io/static/img/favicon.ico" />
<title>مدل پیشرفته جنگو Django کتاب آموزش برخط چارچوب فریم ورک وب</title>
<meta name="description" content="در این آموزش کتاب برخط آنلاین چارچوب فریم ورک جنگو Django می بینیم، تعریف مدل ها و نحوه استفاده از API پایگاه داده جهت ساخت، به روز رسانی، و حذف رکوردها" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index, follow" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="fontiran.com:license" content="ZM3QX" />
<meta name="msvalidate.01" content="338AFFB8975A4C65F4A4BC10CDAFF254" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@oruji" />
<meta name="twitter:creator" content="@oruji" />
<meta name="twitter:title" content="مدل پیشرفته جنگو Django کتاب آموزش برخط چارچوب فریم ورک وب">
<meta name="twitter:description" content="در این آموزش کتاب برخط آنلاین چارچوب فریم ورک جنگو Django می بینیم، تعریف مدل ها و نحوه استفاده از API پایگاه داده جهت ساخت، به روز رسانی، و حذف رکوردها">
<meta name="twitter:image" content="https://oruji.github.io/django/model/advance/logo.png" />
<meta property="og:title" content="مدل پیشرفته جنگو Django کتاب آموزش برخط چارچوب فریم ورک وب" />
<meta property="og:description" content="در این آموزش کتاب برخط آنلاین چارچوب فریم ورک جنگو Django می بینیم، تعریف مدل ها و نحوه استفاده از API پایگاه داده جهت ساخت، به روز رسانی، و حذف رکوردها" />
<meta property="og:url" content="https://oruji.github.io/django/model/advance/" />
<meta property="og:type" content="article" />
<meta property="og:image" content="https://oruji.github.io/django/model/advance/logo.png" />
<script src="https://oruji.github.io/static/js/main.js"></script>
<style>
.token.bold,.token.important,.token.string{font-weight:700}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:20px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#e7eeff}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.doctype,.token.prolog{color:#708090}.token.comment{color:#008a32}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.symbol{color:#000}.token.attr-name,.token.char,.token.inserted,.token.selector{color:#690}.token.builtin{color:#000}.token.string{color:#0f69ff}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#a67f59}.token.operator{color:#692d02}.token.atrule,.token.attr-value,.token.keyword{color:maroon;font-weight:700}.token.function{color:#000}.token.important,.token.regex{color:#e90}.token.variable{color:#b98118}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>
<script src="https://oruji.github.io/static/js/prism.js"></script>
<style>
textarea, input, button, select { font-family: inherit; font-size: inherit;} p, li { text-align: justify;} main, nav { width: 100%;} .leftBlock, .leftInline, .logout, pre, canvas { direction: ltr;} .note td, pre { word-wrap: break-word;} body, main, div, footer, h1, h2, h3, h4, h5, h6, header, nav, input, button { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin: 0; padding: 0 } body { font-family: IRANSans; background-color: #fff; font-size: 1em; line-height: 35px;} nav { font-size: 0.83em; padding: 14px; float: right; margin-bottom: 2px;} header { color: #fff; margin: 2px; min-height: 86px; padding: 13px;} footer { font-size: 0.83em; text-align: center; padding: 30px; clear: both; color: #fff; margin: 2px;} pre { text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.86em; background-color: #e7eeff; padding: 8px 10px 8px 8px; color: #000; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; line-height: 20px; border-radius: 5px } code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} .code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} h1, h2, h3, h4, h5, h6 { font-weight: 500 !important } button { padding: 4px; border-radius: 5px;} .titr-link { text-align: center; font-weight: 700;} h1 { margin-bottom: 20px; margin-top: 20px; font-size: 1.5em;} h2 { font-size: 1.33em;} h3 { font-size: 1.17em;} h4 { font-size: 1.08em;} h5 { font-size: 1em;} textarea { height: 150px; font-size: inherit; line-height: 20px; width: 98%;} main { border-radius: 7px; background-color: #fff; padding-top: 15px; padding-bottom: 15px; padding-right: 20px; padding-left: 20px; min-height: 500px; box-shadow: 0 0 3px 1px #e0d9ff; float: right;} .logout { height: 40px; border-radius: 5px; color: #fff; margin: -5px 2px 2px; direction: ltr; padding-right: 10px; float: left;} .myClean { padding: 0; margin: 0;} .myscroll { display: block; overflow-x: auto } li { padding: 5px } .gradient { border-radius: 7px; background: linear-gradient(#001F38, #37627a); background: -moz-linear-gradient(#001F38, #37627a); background: -webkit-linear-gradient(#001F38, #37627a); background: -ms-linear-gradient(#001F38, #37627a); background: -o-linear-gradient(#001F38, #37627a) } .puzzle { white-space: nowrap;} a { color: #add8e6;} a.content { color: #4164ca;} .last-line, .titr-link { margin-bottom: 10px;} .titr-link { background-color: #e8eeff; border-radius: 5px;} .index, .index-style { border-radius: 4px; padding: 20px; display: block;} .index:hover { color: #add8e6; background-color: #366179;} .index-style { background-color: #e7eeff;} .index-style:hover { color: #add8e6; background-color: #366179;} .myTitle { margin-bottom: -10px } .anav, .anav:hover, .divnav { padding: 4px; display: block;} .divnav { color: #e7eeff; background-color: #366179; border-radius: 3px;} .anav { color: #add8e6;} .anav:hover { background-color: #3e6c8a; border-radius: 3px;} .myError { margin-bottom: 10px; margin-top: 5px; color: red;} .alogo { padding: 10.5px; float: right; color: #000; text-align: center; width: 150px;} .alogo:hover { padding: 10px; border-style: solid; border-radius: 10px; border-width: .5px;} .puzzle, ol, p, li { display: block; overflow-x: auto;} .leftBlock { text-align: left;} .radius5 { border-radius: 5px;} hr { margin-bottom: 15px; margin-top: 0;} .change-lang { margin-top: 5px; background-color: #e8eeff; color: #000; padding-right: 10px; padding-left: 10px; border-radius: 3px; line-height: 29px; text-align: center; height: 26px; display: block; padding-bottom: 5px;} .note { margin: 1em 0; width: 100%; overflow: hidden; background: #FFF; border-radius: 10px; border: 1px solid #167F92 } .note tr { border: 1px solid #D9E4E6 } .note tr:nth-child(odd) { background-color: #e0e0e0 } .note th { border: 1px solid #FFF; background-color: #167F92; color: #FFF } .note th:first-child { display: table-cell; text-align: center } .note th:nth-child(2) { display: table-cell } .note th:nth-child(2) span { display: block } .note th:nth-child(2):after { display: none } .note td { max-width: 7em; border: 1px solid #D9E4E6 } .note td:first-child { display: table-cell; text-align: center; border-right: 1px solid #D9E4E6 } .note td, .note th { display: table-cell; padding: 1em } a, ul.social-icons li a:hover { text-decoration: none } ul.social-icons { padding: 0; width: auto; overflow: initial; margin-top: 0; margin-bottom: 0; float: left;} ul.social-icons li { background-image: url(https://oruji.github.io/static/img/social-sprites.svg); background-repeat: no-repeat; background-color: #FFF; background-position: 0 100px; display: inline-block; margin: -1px 1px 5px 0; padding: 0; border-radius: 100%; overflow: visible; transition: all .3s ease; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .42); -moz-border-radius: 100%; -moz-transition: all .3s ease; -ms-transition: all .3s ease; -o-transition: all .3s ease; -webkit-border-radius: 100%; -webkit-transition: all .3s ease; border: 1.5px solid #12354d; margin-left: 3px; margin-right: 3px;} ul.social-icons li a { display: block; height: 28px; width: 28px; text-align: center } ul.social-icons li[class] a { text-indent: -9999px } ul.social-icons li a i[class^=icon-] { color: #444; font-style: 16px; position: relative; top: 3px } ul.social-icons li a:active { box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -moz-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3) } ul.social-icons li a:active, ul.social-icons li:active { border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100% } ul.social-icons li.facebook { background-position: 0 -001px } ul.social-icons li.facebook:hover { background-position: 0 -031px } ul.social-icons li.github { background-position: 0 -061px } ul.social-icons li.github:hover { background-position: 0 -091px } ul.social-icons li.rss { background-position: 0 -121px } ul.social-icons li.rss:hover { background-position: 0 -151px } ul.social-icons li.twitter { background-position: 0 -181px } ul.social-icons li.twitter:hover { background-position: 0 -211px } ul.social-icons li.googleplus { background-position: 0 -301px } ul.social-icons li.googleplus:hover { background-position: 0 -331px } ul.social-icons li.linkedin { background-position: 0 -241px } ul.social-icons li.linkedin:hover { background-position: 0 -271px } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 900; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Black.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Black.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Black.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 700; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Bold.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Bold.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Bold.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 500; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Medium.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Medium.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Medium.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 300; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Light.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Light.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Light.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 200; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_UltraLight.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_UltraLight.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_UltraLight.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 400; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb.ttf) format('truetype') } .emph { color: #c7254e; background-color: #ffd7e3; border-radius: 4px; font-weight:bold;} .emphG { color: #2e9821; background-color: #e6f9d8; border-radius: 4px; font-weight: bold;} .search-form { text-align: center; padding-top:0; padding-bottom:10px; background-color: white; border-radius: 10px;} .search-input { width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px;} .search-btn { cursor: pointer; width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px; background-color: #366179; color: white;} a.alogo img { width: 120px;} img { max-width: 700px;} a.alogo h2 { font-size:0.87em;} .wide { margin-top: -12px; padding: 15px; float: right; margin-right: -15px;} .widetext { color: white; font-family: High Tower Text; font-weight: 600; font-size: 1.56em; margin-right: -10px; float: right; margin-top: -2px;} .widespan { display: block; font-size: 48%; font-weight: normal; margin-top: -11px; margin-right: 5px;} .logo { float: right; padding: 20px; width: 120px;} .fehrest { clear: both; margin-bottom: 20px; margin-top: 20px;} .plogo { overflow-x: initial;} .yaddasht { float: right; margin-left: 15px; width: 40px; height: 40px;} .imgCenter { display: block; margin: auto; border-radius: 2px;} .up { font-size: 0.83em; background-color: #f5f5f5; padding-right: 20px; padding-left: 20px; border-radius: 5px;} #navContent { display: none;} #uploadForm { float: left; color: grey;} @media only screen and (min-width:768px) { nav { width: 25%;} main { width: 75%;} .search-input { width: 400px;} .search-btn { width: 100px;} .search-form { padding-top: 30px; padding-bottom: 30px; background-color: #93abc3;}} @media only screen and (max-width:466px) { header { min-height: 114px }} .myClear { clear:both;} .mar0{margin:0} .mart-3{margin-top:-3px;} .mart10{margin-top:10px;} .marb10{margin-bottom:10px;} .padr20{padding-right:20px} .floatL{float:left} .floatR{float:right} .myPhone { float: left; direction: ltr; font-weight: bold; font-size: 0.87em; margin-left: 5px; font-style: italic; background: #e8eeff; color: black; border-radius: 5px; padding-right: 7px; height: 26px; padding-top: 1px;} .fontSize { display: inline; float: left; direction: ltr; font-weight:bold;} .increaseFont{ font-size: 1.06em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .decreaseFont{ font-size: 0.81em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .myHide { display:none;}</style>
</head>
<body>
<noscript>Your browser does not support JavaScript!</noscript>
<header class="gradient">
<a href="https://oruji.github.io/" title="oruji.github.io">
<img alt="oruji.github.io" src="https://oruji.github.io/static/img/wide.svg" class="wide">
<div class="widetext">oruji.github.io<span class="widespan">Persian Tutorials</span></div>        </a>
<ul class="social-icons"><li class="github"><a href="https://github.com/oruji" target="_blank" data-placement="bottom" title=" Github">Github</a></li><li class="twitter"><a href="https://twitter.com/oruji" target="_blank" data-placement="bottom" title=" Twitter">Twitter</a></li><li class="linkedin"><a href="https://www.linkedin.com/in/oruji/" target="_blank" data-placement="bottom" title=" Linkedin">Linkedin</a></li><li class="rss"><a href="https://oruji.github.io/feed.xml" target="_blank" data-placement="bottom" title="RSS Feed">rss</a></li></ul>
</header>
<main>
<div class="up">
ویرایش: <span dir=ltr>1396/11/13 19:19</span><div title="تغییر اندازه فونت" class="fontSize">
<span onclick="increaseFont()" class="increaseFont">A</span>
<span onclick="decreaseFont()" class="decreaseFont">A</span>
</div></div>
<div class="center"><h1>آموزش مدل های پیشرفته در جنگو (Django)</h1><p>در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل</a> از این کتاب، یک مقدمه از لایه ی پایگاه داده ی جنگو ارائه شد – نحوه ی تعریف مدل ها و نحوه ی استفاده از API پایگاه داده جهت ساخت، به روز رسانی، و حذف رکوردها. در <a title="آموزش مدل پیشرفته در جنگو" class="content" href="https://oruji.github.io/django/model/advance/">این آموزش</a>، برخی از ویژگی های پیشرفته تر این بخش از فریم ورک یا چارچوب جنگو (Django) را معرفی خواهیم کرد.</p><h2>شیء های مرتبط</h2><p>مدل های book در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> را بخاطر بیاورید:</p><code class="language-python">from django.db import models

class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __unicode__(self):
        return self.name

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()

    def __unicode__(self):
        return u'%s %s' % (self.first_name, self.last_name)

class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)
    publisher = models.ForeignKey(Publisher)
    publication_date = models.DateField()

    def __unicode__(self):
        return self.title</code><p>همانطور که در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> توضیح داده شد، دسترسی به مقدار یک فیلد خاص در یک شیء پایگاه داده به سادگی استفاده از یک attribute می باشد. برای مثال، جهت معلوم کردن عنوان یک کتاب با ID پنجاه، به شکل زیر عمل نمودیم:</p><code class="language-python">&gt;&gt;&gt; from mysite.books.models import Book
&gt;&gt;&gt; b = Book.objects.get(id=50)
&gt;&gt;&gt; b.title
u'The Django Book'</code><p>ولی چیزی که قبلا ذکر نشده است شیء های مرتبط می باشد – فیلدهای بیان شده به صورت یک ForeignKey یا ManyToManyField – که کمی متفاوت عمل می کنند.</p><h3>دسترسی به مقادیر Foreign Key</h3><p>هنگامی که به یک فیلد ForeignKey دسترسی پیدا می کنید، شما شیء مدل مرتبطی دریافت خواهید کرد. برای مثال:</p><code class="language-python">&gt;&gt;&gt; b = Book.objects.get(id=50)
&gt;&gt;&gt; b.publisher
&lt;Publisher: Apress Publishing&gt;
&gt;&gt;&gt; b.publisher.website
u'http://www.apress.com/'</code><p>با فیلدهای ForeignKey، با روش دیگری مواجه خواهیم بود، ولی این کمی متفاوت است، به دلیل اینکه ارتباط نامتقارن می باشد. جهت بدست آوردن لیست کتاب ها برای ناشر داده شده، از <bdo class="leftInline">publisher.book_set.all()</bdo> استفاده کنید:</p><code class="language-python">&gt;&gt;&gt; p = Publisher.objects.get(name='Apress Publishing')
&gt;&gt;&gt; p.book_set.all()
[&lt;Book: The Django Book&gt;, &lt;Book: Dive Into Python&gt;, ...]</code><p>در پشت صحنه، book_set تنها یک QuerySet می باشد (همانطور که در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> توضیح داده شد)، و می تواند همانند QuerySet های دیگر فیلتر یا برش داده شود. برای مثال:</p><code class="language-python">&gt;&gt;&gt; p = Publisher.objects.get(name='Apress Publishing')
&gt;&gt;&gt; p.book_set.filter(name__icontains='django')
[&lt;Book: The Django Book&gt;, &lt;Book: Pro Django&gt;]</code><p>نام attribute فوق یعنی book_set با استفاده از اضافه کردن نام مدل به صورت حروف کوچک به _set تولید شده است.</p><h4>دسترسی به مقادیر Many-to-Many</h4><p>مقادیر Many-to-Many همانند مقادیر foreign-key کار می کنند، با این تفاوت که ما با مقادیر QuerySet به جای نمونه های مدل سر کار داریم. برای مثال، در اینجا نحوه ی مشاهده ی نویسندگان برای یک کتاب وجود دارد:</p><code class="language-python">&gt;&gt;&gt; b = Book.objects.get(id=50)
&gt;&gt;&gt; b.authors.all()
[&lt;Author: Adrian Holovaty&gt;, &lt;Author: Jacob Kaplan-Moss&gt;]
&gt;&gt;&gt; b.authors.filter(first_name='Adrian')
[&lt;Author: Adrian Holovaty&gt;]
&gt;&gt;&gt; b.authors.filter(first_name='Adam')
[]</code><p>در کد فوق، همانند فیلدهای foreignKey، book_set با اضافه کردن نام مدل به صورت حروف کوچک به _set تولید شده است.</p><code class="language-python">&gt;&gt;&gt; a = Author.objects.get(first_name='Adrian', last_name='Holovaty')
&gt;&gt;&gt; a.book_set.all()
[&lt;Book: The Django Book&gt;, &lt;Book: Adrian's Other Book&gt;]</code><p>Here, as with ForeignKey fields, the attribute name book_set is generated by appending the lower case model name to _set.</p><h3>ایجاد تغییرات برای یک طرح پایگاه داده</h3><p>هنگامی که دستور syncdb را در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> معرفی کردیم، اشاره شد که syncdb تنها جداولی را که هنوز در پایگاه داده وجود ندارند را ایجاد می کند – این تغییرات همزمان و یا انجام حذف مدل ها نیست. در صورتیکه شما فیلد مدل را اضافه یا تغییر دهید، یا اگر یک مدل را حذف کنید، نیاز خواهید داشت تغییر را به صورت دستی در پایگاه داده اعمال کنید. این فصل نحوه ی انجام این کار را توضیح می دهد.</p><p>هنگام سر و کار داشتن با تغییرات طرح، به خاطر داشتن چند نکته درباره نحوه ی کار لایه پایگاه داده اهمیت دارد:</p><ul><li>جنگو با صدای بلند شکایت خواهد کرد اگر یک مدل حاوی فیلدی باشد که هنوز در جدول پایگاه داده  ساخته نشده باشد. بار اولی که از API پایگاه داده برای کوئری جدول داده شده استفاده کنید باعث بروز خطا خواهد شد (این اتفاق زمان اجرای کد رخ می دهد، نه در زمان کامپایل) </li><li>جنگو اهمیتی نمی دهد اگر جدول پایگاه داده حاوی ستون هایی باشد که در مدل تعریف نشده اند.</li><li>جنگو اهمیتی نمی دهد اگر یک پایگاه داده حاوی جدولی باشد که با یک مدل نشان داده نشده باشد.</li></ul><p>ایجاد تغییرات schema موضوعی از تغییر قسمت های مختلف می باشد – کد پایتون و خود پایگاه داده.</p><h4>اضافه کردن فیلدها</h4><p>هنگامی که یک فیلد به جدول/مدل اضافه می کنید، حقه این است که از این خاصیت که فریم ورک یا چارچوب جنگو به یک جدول حاوی ستون ها که در مدل تعریف نشده اند اهمیت نمی دهد استفاده کنیم. استراتژی اضافه کردن ستون در پایگاه داده می باشد، و سپس به روز رسانی مدل برای یک فیلد جدید.</p><p>هر چند این مشکل که کدام عمل اول انجام شود در اینجا وجود دارد، زیرا به منظور دانستن نحوه ی ستون جدید پایگاه داده که باید در SQL بیان شود، نیاز است خروجی دستور manage.py sqlall را نگاه کنید که نیازمند این است که فیلد در مدل وجود داشته باشد. (توجه داشته باشید که برای ساختن ستون خود لازم نیست دقیقا از SQL یکسانی که جنگو از آن استفاده می کند استفاده کنید، ولی ایده ی خوبی است که از آن استفاده کنید، تنها برای مطمئن شدن اینکه همه چیز به طور همزمان است.)</p><p>راهکار برای این مشکل که کدام عمل اول انجام شود، استفاده از یک توسعه ی محیطی به جای ایجاد تغییرات در production سرور است. (شما در حال استفاده از یک testing/development محیطی می باشید، درست است؟) در اینجا مراحل دقیق وجود دارد.</p><p>ابتدا، این مراحل در development environment استفاده کنید (نه بر روی production server)</p><ol><li>فیلد را به مدل خود اضافه کنید.</li><li>دستور <bdo class="leftInline">manage.py sqlall [yourapp]</bdo> را جهت مشاهده ی عبارت جدید CREATE TABLE برا مدل اجرا کنید. تعریف ستون برای فیلد جدید را توجه کنید.</li><li>interactive shell پایگاه داده ی خود را اجرا کرده (psql یا mysql و یا می توانید از manage.py dbshell استفاده کنید). یک عبارت ALTER TABLE را که ستون جدید شما را اضافه می کند اجرا کنید.</li><li>interactive shell پایتون را از طریق manage.py shell اجرا نموده و مطمئن شوید که فیلد جدید به درستی اضافه شده است از طریق import کردن مدل و واکشی از جدول (مانند <bdo class="leftInline">MyModel.objects.all()[:5]</bdo>). در صورتیکه پایگاده داده را به درستی به روز رسانی کرده باشید، عبارت باید بدون خطا کار کند.</li></ol><p>سپس بر روی production server این مراحل را انجام دهید:</p><ol><li>interactive shell پایگاه داده را اجرا کنید.</li><li>عبارت ALTER TABLE ای که در مرحله ی سوم development environment استفاده شد را اجرا کنید.</li><li>فیلد را به مدل خود اضافه کنید. در صورتیکه در دست ترجمه ...</li><li>وب سرور را برای اعمال تغییرات دوباره راه اندازی کنید.</li></ol><p>برای مثال، تصور کنید یک فیلد با نام num_pages را به مدل Book که در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> توضیح داده شد اضافه کرده ایم. ابتدا، درون development environment مدل خود را مانند زیر تغییر می دهیم:</p><code class="language-python">class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)
    publisher = models.ForeignKey(Publisher)
    publication_date = models.DateField()
    num_pages = models.IntegerField(blank=True, null=True)

    def __unicode__(self):
        return self.title</code><p>(توجه کنید: بخش "ساختن فیلدهای اختیاری" در <a href="https://oruji.github.io/django/admin-site/" class="content" title="سایت مدیر">سایت مدیر</a> را مطالعه کنید، به اضافه ی قسمت نوار کناری زیر یعنی "اضافه کردن ستون ها NOT NULL" برای جزئیات مهم درباره ی اینکه چرا از blank=True و null=True استفاده شده است)</p><p>سپس دستور manage.py sqlall books را برای مشاهده ی عبارت CREATE TABLE اجرا می کنیم. بسته به پایگاه داده ی شما، خروجی چیزی شبیه به کد زیر است:</p><code class="language-sql">CREATE TABLE "books_book" (
    "id" serial NOT NULL PRIMARY KEY,
    "title" varchar(100) NOT NULL,
    "publisher_id" integer NOT NULL REFERENCES "books_publisher" ("id"),
    "publication_date" date NOT NULL,
    "num_pages" integer NULL
);</code><p>ستون جدید بدین شکل نشان داده شده است:</p><code class="language-sql">"num_pages" integer NULL</code><p>در قدم بعدی، interactive shell پایگاه داده را برای توسعه ی پایگاه داده با تایپ کردن psql (برایPostgreSQL) اجرا کرده،  و عبارت زیر را درون آن اجرا می کنیم:</p><code class="language-sql">ALTER TABLE books_book ADD COLUMN num_pages integer;</code><ul><img src="https://oruji.github.io/static/img/note.svg" alt="جدول" class="yaddasht"><h4>اضافه کردن ستون های NOT NULL</h4><p>در اینجا زیرکی قابل ذکری وجود دارد. هنگامی که فیلد num_pages را به مدل خود اضافه کردیم، امکان های blank=True و null=True را نیز استفاده کردیم. این کار به این دلیل انجام شده است که یک ستون پایگاه داده هنگام ساختن آن در با اول حاوی مقادیر NULL باشد.</p><p>هرچند، این امکان نیز وجود دارد که ستون هایی را اضافه کنیم که نتوانند حاوی مقادیر NULL باشند. برای انجام چنین کاری، باید ستون به صورت NULL ساخته شود، سپس مقادیر ستون با استفاده از برخی پیشفرض ها مقدار دهی شود، و پس از آن ستون را به NOT NULL تغییر داد. برای مثال</p></ul><code class="language-sql">BEGIN;
ALTER TABLE books_book ADD COLUMN num_pages integer;
UPDATE books_book SET num_pages=0;
ALTER TABLE books_book ALTER COLUMN num_pages SET NOT NULL;
COMMIT;</code><p>در صورتیکه از این روش استفاده می کنید، بخاطر داشته باشید که باید blank=True و null=True را در مدل خود حذف کنید.</p><p>بعد از عبارت ALTER TABLE، با اجرای shell پایتون و اجرای کد زیر در آن مطمئن می شویم که تغییر به درستی کار می کند:</p><code class="language-python">&gt;&gt;&gt; from mysite.books.models import Book
&gt;&gt;&gt; Book.objects.all()[:5]</code><p>در صورتیکه کد فوق موجب بروز هیچ خطایی نشود، بر روی production server رفته و عبارت ALTER TABLE را در پایگاه داده ی production اجرا می کنیم. سپس، مدل موجود در production environment را به روز رسانی کرده و وب سرور را دوباره راه اندازی می کنیم.</p><h4>حذف فیلدها</h4><p>حذف یک فیلد از یک مدل بسیار ساده تر از اضافه کردن آن می باشد. برای حذف یک فیلد، تنها کافیست مراحل زیر را دنبال کنید:</p><ol><li>فیلد مورد نظر را از مدل خود حذف کرده و وب سرور را دوباره راه اندازی کنید.</li><li>ستون مورد نظر را از پایگاه داده ی خود، با استفاده از دستور زیر حذف کنید:<code class="language-python">ALTER TABLE books_book DROP COLUMN num_pages;</code></li></ol><p>اطمینان حاصل کنید مراحل فوق را به ترتیب انجام می دهید. در صورتیکه ابتدا ستون را از پایگاه داده حذف کنید، جنگو (Django) به سرعت خطایی را ایجاد خواهد کرد.</p><h4>حذف فیلدهای Many-to-Many</h4><p>به دلیل آنکه فیلدهای many-to-many متفاوت از فیلدهای عادی می باشند، روند حذف آن ها نیز متفاوت می باشد:</p><ol><li>ManyToManyField را از مدل خود حذف کرده و وب سرور را دوباره راه اندازی کنید.</li><li>جدول many-to-many را از پایگاه داده ی خود حذف با استفاده از دستور زیر حذف کنید:<code class="language-sql">DROP TABLE books_book_authors;</code></li></ol><p>همانند بخش قبلی، اطمینان حاصل کنید که مراحل فوق را به ترتیب انجام می دهید.</p><h3>حذف مدل ها</h3><p>حذف کردن یک مدل کاملا ساده تر از حذف یک فیلد می باشد. برای حذف یک مدل، تنها کافیست مراحل زیر را دنبال کنید:</p><ol><li>مدل مورد نظر را از فایل models.py خود حذف کرده و وب سرور را دوباره راه اندازی کنید.</li><li>جدول مورد نظر را از پایگاه داده ی خود به استفاده از کد زیر حذف کنید:<code class="language-python">DROP TABLE books_book;</code><p>توجه داشته باشد که، ممکن است نیاز باشد تا هر جدول وابسته به این جدول را درون پایگاه داده حذف کنید – مانند، هر جدولی که به books_book دارای کلید خارجی باشد.</p></li></ol><p>همانند بخش قبلی، اطمینان حاصل کنید که مراحل فوق را به ترتیب انجام می دهید.</p><h4>Managers</h4><p>در عبارت <bdo class="leftInline">Book.objects.all()</bdo>، objects یک attribute ویژه از میان کوئری هایی که به پایگاه داده ارسال می شود می باشد. در <a href="https://oruji.github.io/django/model/" class="content" title="مدل">آموزش مدل جنگو</a> این attribute، به طور خلاصه به صورت manager مدل توضیح داده شد. حالا زمان آن است که کمی عمیق تر به هویت manager ها و اینکه چگونه می توان از آن ها استفاده کرد بپردازیم.</p><p>به طور خلاصه، manager مدل یک شیء می باشد که مدل های جنگو از طریق آن کوئری های پایگاه داده را اجرا می کنند. هر مدل جنگو دارای حداقل یک manager می باشد، و می توان manager های سفارشی ای را به منظور سفارشی سازی دسترسی به پایگاه داده ایجاد نمود.</p><p>دو دلیل که ممکن است شما بخواهید یک manager سفارشی ایجاد کنید وجود دارد: برای اضافه کردن متدهای manager اضافه، و یا برای تغییر QuerySet اولیه ای که manager بر می گرداند.</p><h4>اضافه کردن متدهای اضافه ی Manager</h4><p>اضافه کردن متدهای اضافه ی manager روشی مقدم برای اضافه کردن عملکرد در سطح جدول برای مدل های شما می باشد. (برای عملکرد در سطح ردیف – مانند توابعی که بر روی یک نمونه ی تکی از یک شیء مدل عمل می کنند – از متدهای مدل استفاده کنید، که پیش تر در این فصل توضیح داده شده است.)</p><p>برای مثال، اجازه دهید برای مدل Book یک manager متد <bdo class="leftInline">title_count()</bdo> که که یک keyword دریافت کرده و تعداد کتاب هایی که عنوان آن ها حاوی keyword می باشد را بر می گرداند بنویسیم. (این مثال کمی ساختگی می باشد، ولی نحوه ی کار manager ها را نشان می دهد.)</p><code class="language-python"># models.py

from django.db import models

# ... Author and Publisher models here ...

class BookManager(models.Manager):
    def title_count(self, keyword):
        return self.filter(title__icontains=keyword).count()

class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)
    publisher = models.ForeignKey(Publisher)
    publication_date = models.DateField()
    num_pages = models.IntegerField(blank=True, null=True)
    objects = BookManager()

    def __unicode__(self):
        return self.title</code><p>با وجود manager فوق، می توان:</p><code class="language-python">&gt;&gt;&gt; Book.objects.title_count('django')
4
&gt;&gt;&gt; Book.objects.title_count('python')
18</code><p>در نکته هایی درباره ی کد فوق را مشاهده می کنید:</p><ul><li>یک کلاس BookManager ایجاد شد که از کلاس django.db.models.Manager ارث بری کرده است. این کلاس دارای تنها یک متد <bdo class="leftInline">title_count()</bdo> می باشد که محاسبات را انجام می دهد. توجه داشته باشید که متد از <bdo class="leftInline">self.filter()</bdo> استفاده کرده است که self به خود manager مراجعه می کند.</li><li><bdo class="leftInline">BookManager()</bdo> به objects در مدل اختصاص داده شده است. این دارای تاثیر از جابه جایی پیشفرض manager برای مدل می باشد که objects نامیده می شود و در صورتیکه یک manager سفارشی تعیین نشده باشد به طور خودکار ساخته می شود. ما آن را به جای هر چیز دیگری، objects می نامیم. در دست ترجمه ...</li></ul><p>چرا می خواهیم یک متد مانند <bdo class="leftInline">title_count()</bdo> اضافه کنیم؟ برای ایجاد کدی عمومی برای اجرای کوئری ها که نیازی به کد تکراری نداشته باشیم.</p><h4>تغییر QuerySet های اولیه ی manager</h4><p>QuerySet پایه ی manager تمام شیء های سیستم را بر می گرداند. برای مثال، <bdo class="leftInline">Book.objects.all()</bdo> تمام کتاب های موجود در پایگاه داده ی book را بر می گرداند.</p><p>می توان از طریق بازنویسی متد <bdo class="leftInline">Manager.get_query_set()</bdo>، QuerySet پایه ی manager را بازنویسی کرد. <bdo class="leftInline">get_query_set()</bdo> باید یک QuerySet با ویژگی هایی که نیاز است را بر گرداند.</p><p>برای مثال، مدل زیر دارای دو manager می باشد – یکی تمام شیء ها را بر می گرداند و دیگری تنها کتاب های نوشته شده توسط Roald Dahl را بر می گرداند.</p><code class="language-python">from django.db import models

# First, define the Manager subclass.
class DahlBookManager(models.Manager):
    def get_query_set(self):
        return super(DahlBookManager, self).get_query_set().filter(author='Roald Dahl')

# Then hook it into the Book model explicitly.
class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.CharField(max_length=50)
    # ...

    objects = models.Manager() # The default manager.
    dahl_objects = DahlBookManager() # The Dahl-specific manager.</code><p>با مدل نمونه ی فوق، <bdo class="leftInline">Book.objects.all()</bdo> تمام کتاب های موجود در پایگاه داده را بر خواهد گرداند، ولی <bdo class="leftInline">Book.dahl_objects.all()</bdo> تنها کتاب هایی که توسط Roald Dahl نوشته شده اند را بر خواهد گرداند. توجه داشته باشید که به طور صریح objects را در نمونه Manager عادی قرار داده ایم، زیرا در غیر اینصورت، تنها manager قابل دسترس dahl_objects خواهد بود.</p><p>البته، به دلیل آنکه <bdo class="leftInline">get_query_set()</bdo> یک شیء QuerySet بر می گرداند، می توانید از <bdo class="leftInline">filter()</bdo>، <bdo class="leftInline">exclude()</bdo> و تمام متدهای QuerySet در آن استفاده کرد. بنابراین عبارت های زیر درست می باشند:</p><code class="language-python">Book.dahl_objects.all()
Book.dahl_objects.filter(title='Matilda')
Book.dahl_objects.count()</code><p>مثال فوق همچنین به تکنیک های جالب دیگری نیز اشاره می کند: استفاده از manager های چندگانه در یک مدل. می توان به صورت بسیاری از نمونه های <bdo class="leftInline">Manager()</bdo> به یک مدل همانطور که می خواهید attach کنید.</p><p>برای مثال:</p><code class="language-python">class MaleManager(models.Manager):
    def get_query_set(self):
        return super(MaleManager, self).get_query_set().filter(sex='M')

class FemaleManager(models.Manager):
    def get_query_set(self):
        return super(FemaleManager, self).get_query_set().filter(sex='F')

class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    sex = models.CharField(max_length=1, choices=(('M', 'Male'), ('F', 'Female')))
    people = models.Manager()
    men = MaleManager()
    women = FemaleManager()</code><p>مثال فوق به شما اجازه می دهد <bdo class="leftInline">Person.men.all()</bdo>، <bdo class="leftInline">Person.women.all()</bdo> و <bdo class="leftInline">Person.people.all()</bdo> را درخواست کنید. در دست ترجمه ...</p><p>در صورتیکه از شیء های Manager سفارشی استفاده می کنید، توجه داشته باشید که اولین Manager ای که جنگو با آن برخورد می کند (به ترتیبی که درون مدل تعریف شده اند) دارای وضعیت ویژه ای می باشد. جنگو اولین Manager تعریف شده در یک کلاس را به صورت Manager پیشفرض تلقی می کند، و چندین بخش از جنگو (بجز برنامه ی مدیر) منحصرا برای آن مدل از این Manager استفاده خواهند کرد. نتیجه این که، اغلب ایده ی خوبی است که با دقت بیشتری manager پیشفرض را انتخاب کنیم، به منظور اجتناب از وضعیتی که نتایج <bdo class="leftInline">get_query_set()</bdo> را به دلیل ناتوانی برای بازیابی شیء هایی که می خواهید با آن ها کار کنید بازنویسی کنید.</p><h3>متدهای Model</h3><p>متدهای سفارشی در یک مدل برای اضافه کردن عملکرد سفارشی در سطح ردیف به شیء های خودتان اضافه کنید. در حالیکه manager ها برای چیزهایی در سطح جدول در نظر گرفته شده اند، متدهای مدل باید در یک نمونه ی مدل خاص عمل کنند.</p><p>این یک تکنیک ارزشمند برای نگهداشتن business logic در یک مکان می باشد – مدل.</p><p>ذکر یک مثال ساده ترین راه برای توضیح این موضوع می باشد. در اینجا یک مدل با تعدادی متدهای سفارشی وجود دارد:</p><code class="language-python">from django.contrib.localflavor.us.models import USStateField
from django.db import models

class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    birth_date = models.DateField()
    address = models.CharField(max_length=100)
    city = models.CharField(max_length=50)
    state = USStateField() # Yes, this is U.S.-centric...

    def baby_boomer_status(self):
        "Returns the person's baby-boomer status."
        import datetime
        if datetime.date(1945, 8, 1) &lt;= self.birth_date &lt;= datetime.date(1964, 12, 31):
            return "Baby boomer"
        if self.birth_date &lt; datetime.date(1945, 8, 1):
            return "Pre-boomer"
        return "Post-boomer"

    def is_midwestern(self):
        "Returns True if this person is from the Midwest."
        return self.state in ('IL', 'WI', 'MI', 'IN', 'OH', 'IA', 'MO')

    def _get_full_name(self):
        "Returns the person's full name."
        return u'%s %s' % (self.first_name, self.last_name)
    full_name = property(_get_full_name)</code><p>آخرین متد در مثال فوق یک "property" می باشد. برای اطلاعات بیشتر در مورد property ها به <bdo class="leftInline">http://www.python.org/download/releases/2.2/descrintro/#property</bdo> مراجعه کنید.</p><p>کاربرد مثال فوق:</p><code class="language-python">&gt;&gt;&gt; p = Person.objects.get(first_name='Barack', last_name='Obama')
&gt;&gt;&gt; p.birth_date
datetime.date(1961, 8, 4)
&gt;&gt;&gt; p.baby_boomer_status()
'Baby boomer'
&gt;&gt;&gt; p.is_midwestern()
True
&gt;&gt;&gt; p.full_name  # Note this isn't a method -- it's treated as an attribute
u'Barack Obama'</code><h3>اجرای کوئری های خام SQL</h3><p>گاهی اوقات می خواهید کوئری هایی را به صورت مستقیم در پایگاه داده ی خود اجرا کنید. به آسانی می توان این کار را از طریق دسترسی به شیء django.db.connection انجام داد که connection فعلی پایگاده داده را نشان می دهد. برای استفاده از آن، <bdo class="leftInline">connection.cursor()</bdo> را جهت بدست آوردن یک شیء cursor فراخوانی کنید، سپس جهت اجرای SQL و <bdo class="leftInline">cursor.fetchone()</bdo> یا cursor.fetchall برای برگرداندن نتیجه ی ردیف ها <bdo class="leftInline">cursor.execute(sql, [params])</bdo> را فراخوانی کنید:</p><code class="language-python">&gt;&gt;&gt; from django.db import connection
&gt;&gt;&gt; cursor = connection.cursor()
&gt;&gt;&gt; cursor.execute("""
...    SELECT DISTINCT first_name
...    FROM people_person
...    WHERE last_name = %s""", ['Lennon'])
&gt;&gt;&gt; row = cursor.fetchone()
&gt;&gt;&gt; print row
['John']</code><p>connection و cursor غالبا "DB-API" استاندارد پایتون را اجرا می کنند که می توانید برا اطلاعات بیشتر در مورد آن به <bdo class="leftInline">http://www.python.org/peps/pep-0249.html</bdo> مراجعه کنید. در صورتیکه با DB-API پایتون آشنایی ندارید، توجه داشته باشید که عبارت SQL در <bdo class="leftInline">cursor.execute()</bdo> از حفره های "%s" به جای اضافه کردن پارامتر های به صورت مستقیم درون SQL استفاده می کند. در صورتیکه از این تکنیک استفاده می کنید، کتابخانه ی زیرین پایگاه داده به طور خودکار کتیشن هایی در صورت نیاز اضافه خواهد کرد. در دست ترجمه ...</p><p>به جای آن که کد view شما به صورت درهم و برهم و پراکنده با عبارت های django.db.connection قرار بگیرد، ایده ی خوبی است که آن ها را در متدهای سفارشی مدل یا متدهای manager قرار دهیم. برای مثال، مثال فوق می تواند درون یک متد manager سفارشی مانند زیر جمع شود:</p><code class="language-python">from django.db import connection, models

class PersonManager(models.Manager):
    def first_names(self, last_name):
        cursor = connection.cursor()
        cursor.execute("""
            SELECT DISTINCT first_name
            FROM people_person
            WHERE last_name = %s""", [last_name])
        return [row[0] for row in cursor.fetchone()]

class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    objects = PersonManager()</code><p>کاربرد مثال فوق:</p><code class="language-python">&gt;&gt;&gt; Person.objects.first_names('Lennon')
['John', 'Cynthia']</code></div></main>
<nav class="gradient">
    <div class="titr-link">کتاب های آموزشی</div>
<a title="زبان جاوا" class="anav" href="https://oruji.github.io/java/">زبان جاوا</a><a title="زبان پایتون" class="anav" href="https://oruji.github.io/python/">زبان پایتون</a><a title="فریم ورک جنگو" class="anav" href="https://oruji.github.io/django/">فریمورک جنگو</a><a title="سیستم عامل لینوکس" class="anav" href="https://oruji.github.io/linux/">سیستم عامل لینوکس</a><a title="مطالب CSS" class="anav last-line" href="https://oruji.github.io/css/">مطالب CSS</a><div class="titr-link">کتاب آموزش جنگو</div>
<a href="https://oruji.github.io/django/introduction/" class="anav" title="مقدمه">مقدمه</a><a href="https://oruji.github.io/django/start/" class="anav" title="شروع کار">شروع کار</a><a href="https://oruji.github.io/django/view/urlconf/" class="anav" title="view ها و URLconf ها">view ها و URLconf ها</a><a href="https://oruji.github.io/django/template/" class="anav" title="Template ها">Template ها</a><a href="https://oruji.github.io/django/model/" class="anav" title="مدل ها">مدل ها</a><a href="https://oruji.github.io/django/admin-site/" class="anav" title="سایت مدیر">سایت مدیر</a><a href="https://oruji.github.io/django/form/" class="anav" title="فرم ها">فرم ها</a><a href="https://oruji.github.io/django/view/urlconf/advance/" class="anav" title="View ها و URLconf های پیشرفته">View ها و URLconf های پیشرفته</a><a href="https://oruji.github.io/django/template/advance/" class="anav" title="Template های پیشرفته">Template های پیشرفته</a><div  class="divnav" title="مدل های پیشرفته">مدل های پیشرفته</div><a href="https://oruji.github.io/django/view/generic/" class="anav" title="View های Generic">View های Generic</a><a href="https://oruji.github.io/django/non-html/" class="anav" title="تولید محتوای غیر html ای">تولید محتوای غیر html ای</a><a href="https://oruji.github.io/django/session/" class="anav" title="Session ها، کاربران، و عضویت">Session ها، کاربران، و عضویت</a><a href="https://oruji.github.io/django/caching/" class="anav" title="مبحث Caching">مبحث Caching</a><a href="https://oruji.github.io/django/package/contrib/" class="anav" title="پکیج django.contrib">پکیج django.contrib</a><a href="https://oruji.github.io/django/middleware/" class="anav" title="مبحث Middleware">مبحث Middleware</a><a href="https://oruji.github.io/django/database/integrate/legacy/" class="anav" title="یکپارچه سازی برنامه ها و دیتابیس های Legacy">یکپارچه سازی برنامه ها و دیتابیس های Legacy</a><a href="https://oruji.github.io/django/internationalize/" class="anav" title="بین المللی سازی">بین المللی سازی</a><a href="https://oruji.github.io/django/security/" class="anav" title="امنیت">امنیت</a></nav>
<footer class="gradient">Copyright © 2020 - <a href="https://oruji.github.io/" title="آموزش آنلاین">oruji.github.io</a></footer></body>

</html>