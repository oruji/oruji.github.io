<!DOCTYPE html>
<html dir="rtl" lang="fa">


<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-43783552-5"></script>
<script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config','UA-43783552-5');</script>
<link rel="canonical" href="https://oruji.github.io/django/session/" />
<link rel="shortcut icon" href="https://oruji.github.io/static/img/favicon.ico" />
<title>کاربران عضویت Session جنگو Django کتاب آموزش چارچوب فریم ورک</title>
<meta name="description" content="این آموزش از کتاب فریم ورک چارچوب برخط آنلاین جنگو Django شما با ایجاد صفحات عضویت و ورود آشنا شده و خواهید تواست با session برای ایجاد این گونه صفحات کار کنید" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index, follow" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="fontiran.com:license" content="ZM3QX" />
<meta name="msvalidate.01" content="338AFFB8975A4C65F4A4BC10CDAFF254" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@oruji" />
<meta name="twitter:creator" content="@oruji" />
<meta name="twitter:title" content="کاربران عضویت Session جنگو Django کتاب آموزش چارچوب فریم ورک">
<meta name="twitter:description" content="این آموزش از کتاب فریم ورک چارچوب برخط آنلاین جنگو Django شما با ایجاد صفحات عضویت و ورود آشنا شده و خواهید تواست با session برای ایجاد این گونه صفحات کار کنید">
<meta name="twitter:image" content="https://oruji.github.io/django/session/logo.png" />
<meta property="og:title" content="کاربران عضویت Session جنگو Django کتاب آموزش چارچوب فریم ورک" />
<meta property="og:description" content="این آموزش از کتاب فریم ورک چارچوب برخط آنلاین جنگو Django شما با ایجاد صفحات عضویت و ورود آشنا شده و خواهید تواست با session برای ایجاد این گونه صفحات کار کنید" />
<meta property="og:url" content="https://oruji.github.io/django/session/" />
<meta property="og:type" content="article" />
<meta property="og:image" content="https://oruji.github.io/django/session/logo.png" />
<script src="https://oruji.github.io/static/js/main.js"></script>
<style>
.token.bold,.token.important,.token.string{font-weight:700}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:20px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#e7eeff}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.doctype,.token.prolog{color:#708090}.token.comment{color:#008a32}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.symbol{color:#000}.token.attr-name,.token.char,.token.inserted,.token.selector{color:#690}.token.builtin{color:#000}.token.string{color:#0f69ff}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#a67f59}.token.operator{color:#692d02}.token.atrule,.token.attr-value,.token.keyword{color:maroon;font-weight:700}.token.function{color:#000}.token.important,.token.regex{color:#e90}.token.variable{color:#b98118}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>
<script src="https://oruji.github.io/static/js/prism.js"></script>
<style>
textarea, input, button, select { font-family: inherit; font-size: inherit;} p, li { text-align: justify;} main, nav { width: 100%;} .leftBlock, .leftInline, .logout, pre, canvas { direction: ltr;} .note td, pre { word-wrap: break-word;} body, main, div, footer, h1, h2, h3, h4, h5, h6, header, nav, input, button { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin: 0; padding: 0 } body { font-family: IRANSans; background-color: #fff; font-size: 1em; line-height: 35px;} nav { font-size: 0.83em; padding: 14px; float: right; margin-bottom: 2px;} header { color: #fff; margin: 2px; min-height: 86px; padding: 13px;} footer { font-size: 0.83em; text-align: center; padding: 30px; clear: both; color: #fff; margin: 2px;} pre { text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.86em; background-color: #e7eeff; padding: 8px 10px 8px 8px; color: #000; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; line-height: 20px; border-radius: 5px } code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} .code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} h1, h2, h3, h4, h5, h6 { font-weight: 500 !important } button { padding: 4px; border-radius: 5px;} .titr-link { text-align: center; font-weight: 700;} h1 { margin-bottom: 20px; margin-top: 20px; font-size: 1.5em;} h2 { font-size: 1.33em;} h3 { font-size: 1.17em;} h4 { font-size: 1.08em;} h5 { font-size: 1em;} textarea { height: 150px; font-size: inherit; line-height: 20px; width: 98%;} main { border-radius: 7px; background-color: #fff; padding-top: 15px; padding-bottom: 15px; padding-right: 20px; padding-left: 20px; min-height: 500px; box-shadow: 0 0 3px 1px #e0d9ff; float: right;} .logout { height: 40px; border-radius: 5px; color: #fff; margin: -5px 2px 2px; direction: ltr; padding-right: 10px; float: left;} .myClean { padding: 0; margin: 0;} .myscroll { display: block; overflow-x: auto } li { padding: 5px } .gradient { border-radius: 7px; background: linear-gradient(#001F38, #37627a); background: -moz-linear-gradient(#001F38, #37627a); background: -webkit-linear-gradient(#001F38, #37627a); background: -ms-linear-gradient(#001F38, #37627a); background: -o-linear-gradient(#001F38, #37627a) } .puzzle { white-space: nowrap;} a { color: #add8e6;} a.content { color: #4164ca;} .last-line, .titr-link { margin-bottom: 10px;} .titr-link { background-color: #e8eeff; border-radius: 5px;} .index, .index-style { border-radius: 4px; padding: 20px; display: block;} .index:hover { color: #add8e6; background-color: #366179;} .index-style { background-color: #e7eeff;} .index-style:hover { color: #add8e6; background-color: #366179;} .myTitle { margin-bottom: -10px } .anav, .anav:hover, .divnav { padding: 4px; display: block;} .divnav { color: #e7eeff; background-color: #366179; border-radius: 3px;} .anav { color: #add8e6;} .anav:hover { background-color: #3e6c8a; border-radius: 3px;} .myError { margin-bottom: 10px; margin-top: 5px; color: red;} .alogo { padding: 10.5px; float: right; color: #000; text-align: center; width: 150px;} .alogo:hover { padding: 10px; border-style: solid; border-radius: 10px; border-width: .5px;} .puzzle, ol, p, li { display: block; overflow-x: auto;} .leftBlock { text-align: left;} .radius5 { border-radius: 5px;} hr { margin-bottom: 15px; margin-top: 0;} .change-lang { margin-top: 5px; background-color: #e8eeff; color: #000; padding-right: 10px; padding-left: 10px; border-radius: 3px; line-height: 29px; text-align: center; height: 26px; display: block; padding-bottom: 5px;} .note { margin: 1em 0; width: 100%; overflow: hidden; background: #FFF; border-radius: 10px; border: 1px solid #167F92 } .note tr { border: 1px solid #D9E4E6 } .note tr:nth-child(odd) { background-color: #e0e0e0 } .note th { border: 1px solid #FFF; background-color: #167F92; color: #FFF } .note th:first-child { display: table-cell; text-align: center } .note th:nth-child(2) { display: table-cell } .note th:nth-child(2) span { display: block } .note th:nth-child(2):after { display: none } .note td { max-width: 7em; border: 1px solid #D9E4E6 } .note td:first-child { display: table-cell; text-align: center; border-right: 1px solid #D9E4E6 } .note td, .note th { display: table-cell; padding: 1em } a, ul.social-icons li a:hover { text-decoration: none } ul.social-icons { padding: 0; width: auto; overflow: initial; margin-top: 0; margin-bottom: 0; float: left;} ul.social-icons li { background-image: url(https://oruji.github.io/static/img/social-sprites.svg); background-repeat: no-repeat; background-color: #FFF; background-position: 0 100px; display: inline-block; margin: -1px 1px 5px 0; padding: 0; border-radius: 100%; overflow: visible; transition: all .3s ease; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .42); -moz-border-radius: 100%; -moz-transition: all .3s ease; -ms-transition: all .3s ease; -o-transition: all .3s ease; -webkit-border-radius: 100%; -webkit-transition: all .3s ease; border: 1.5px solid #12354d; margin-left: 3px; margin-right: 3px;} ul.social-icons li a { display: block; height: 28px; width: 28px; text-align: center } ul.social-icons li[class] a { text-indent: -9999px } ul.social-icons li a i[class^=icon-] { color: #444; font-style: 16px; position: relative; top: 3px } ul.social-icons li a:active { box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -moz-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3) } ul.social-icons li a:active, ul.social-icons li:active { border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100% } ul.social-icons li.facebook { background-position: 0 -001px } ul.social-icons li.facebook:hover { background-position: 0 -031px } ul.social-icons li.github { background-position: 0 -061px } ul.social-icons li.github:hover { background-position: 0 -091px } ul.social-icons li.rss { background-position: 0 -121px } ul.social-icons li.rss:hover { background-position: 0 -151px } ul.social-icons li.twitter { background-position: 0 -181px } ul.social-icons li.twitter:hover { background-position: 0 -211px } ul.social-icons li.googleplus { background-position: 0 -301px } ul.social-icons li.googleplus:hover { background-position: 0 -331px } ul.social-icons li.linkedin { background-position: 0 -241px } ul.social-icons li.linkedin:hover { background-position: 0 -271px } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 900; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Black.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Black.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Black.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 700; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Bold.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Bold.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Bold.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 500; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Medium.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Medium.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Medium.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 300; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Light.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Light.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Light.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 200; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_UltraLight.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_UltraLight.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_UltraLight.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 400; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb.ttf) format('truetype') } .emph { color: #c7254e; background-color: #ffd7e3; border-radius: 4px; font-weight:bold;} .emphG { color: #2e9821; background-color: #e6f9d8; border-radius: 4px; font-weight: bold;} .search-form { text-align: center; padding-top:0; padding-bottom:10px; background-color: white; border-radius: 10px;} .search-input { width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px;} .search-btn { cursor: pointer; width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px; background-color: #366179; color: white;} a.alogo img { width: 120px;} img { max-width: 700px;} a.alogo h2 { font-size:0.87em;} .wide { margin-top: -12px; padding: 15px; float: right; margin-right: -15px;} .widetext { color: white; font-family: High Tower Text; font-weight: 600; font-size: 1.56em; margin-right: -10px; float: right; margin-top: -2px;} .widespan { display: block; font-size: 48%; font-weight: normal; margin-top: -11px; margin-right: 5px;} .logo { float: right; padding: 20px; width: 120px;} .fehrest { clear: both; margin-bottom: 20px; margin-top: 20px;} .plogo { overflow-x: initial;} .yaddasht { float: right; margin-left: 15px; width: 40px; height: 40px;} .imgCenter { display: block; margin: auto; border-radius: 2px;} .up { font-size: 0.83em; background-color: #f5f5f5; padding-right: 20px; padding-left: 20px; border-radius: 5px;} #navContent { display: none;} #uploadForm { float: left; color: grey;} @media only screen and (min-width:768px) { nav { width: 25%;} main { width: 75%;} .search-input { width: 400px;} .search-btn { width: 100px;} .search-form { padding-top: 30px; padding-bottom: 30px; background-color: #93abc3;}} @media only screen and (max-width:466px) { header { min-height: 114px }} .myClear { clear:both;} .mar0{margin:0} .mart-3{margin-top:-3px;} .mart10{margin-top:10px;} .marb10{margin-bottom:10px;} .padr20{padding-right:20px} .floatL{float:left} .floatR{float:right} .myPhone { float: left; direction: ltr; font-weight: bold; font-size: 0.87em; margin-left: 5px; font-style: italic; background: #e8eeff; color: black; border-radius: 5px; padding-right: 7px; height: 26px; padding-top: 1px;} .fontSize { display: inline; float: left; direction: ltr; font-weight:bold;} .increaseFont{ font-size: 1.06em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .decreaseFont{ font-size: 0.81em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .myHide { display:none;}</style>
</head>
<body>
<noscript>Your browser does not support JavaScript!</noscript>
<header class="gradient">
<a href="https://oruji.github.io/" title="oruji.github.io">
<img alt="oruji.github.io" src="https://oruji.github.io/static/img/wide.svg" class="wide">
<div class="widetext">oruji.github.io<span class="widespan">Persian Tutorials</span></div>        </a>
<ul class="social-icons"><li class="github"><a href="https://github.com/oruji" target="_blank" data-placement="bottom" title=" Github">Github</a></li><li class="twitter"><a href="https://twitter.com/oruji" target="_blank" data-placement="bottom" title=" Twitter">Twitter</a></li><li class="linkedin"><a href="https://www.linkedin.com/in/oruji/" target="_blank" data-placement="bottom" title=" Linkedin">Linkedin</a></li><li class="rss"><a href="https://oruji.github.io/feed.xml" target="_blank" data-placement="bottom" title="RSS Feed">rss</a></li></ul>
</header>
<main>
<div class="up">
ویرایش: <span dir=ltr>1396/11/2 22:16</span><div title="تغییر اندازه فونت" class="fontSize">
<span onclick="increaseFont()" class="increaseFont">A</span>
<span onclick="decreaseFont()" class="decreaseFont">A</span>
</div></div>
<div class="center"><h1>آموزش Session ها، کاربران، و عضویت در جنگو (Django)</h1><p>وقت آن رسیده است که اعترافی کنیم: ما تا اینجای کتاب آموزشی چارچوب جنگو (Django)، به طور عمد، یک جنبه ی مهم از توسعه ی وب را عقب انداخته ایم.</p><p>مرورگر هایی که سایت های ما را مورد هدف قرار می دهند که در پشت خود انسان های واقعی دارند (حداقل بیشتر اوقات). این نکته ی بزرگی برای رد کردن است: بهترین حالت اینترنت زمانی می باشد که برای وصل شدن به مردم خدمات می دهد، نه ماشین ها. در صورتی که بخواهیم به درستی سایت ها را وادار کنیم، سر انجام باید با افراد در پشت مرورگر ها سر و کار داشته باشیم.</p><p>متاسفانه، این موضوع ساده ای نمی باشد. HTTP طوری طراحی شده است که بی حالت باشد – بدین معنی که، هر درخواست در یک فضای تهی اتفاق می افتد. دوامی بین یک درخواست و درخواست بعدی وجود ندارد، و ما نمی توانیم هر یک از جنبه ها درخواست (آدرس IP، مرورگر و غیره ...) را که به طور مداوم توسط یک شخص به طور پی در پی ارسال می شود را شمارش کنیم.</p><p>در <a title="آموزش session و کاربران در جنگو" class="content" href="https://oruji.github.io/django/session/">این آموزش</a> شما نحوه ی کنترل این فقدان حالت را خواهید آموخت. با پایین ترین سطح (کوکی ها) شروع خواهیم کرد، و به سمت ابزار سطح بالاتر برای کنترل session ها، کاربران و عضویت حرکت خواهیم کرد.</p><h2>کوکی ها (Cookies)</h2><p>توسعه دهندگان مرورگر مدت ها پیش متوجه این موضوع شدند که وضعیت statelessness یک مشکل بزرگ برای توسعه دهندگان وب به شمار می رود، و در نتیجه کوکی ها چشم به جهان گشودند. کوکی یک تکه ی کوچک از اطلاعات می باشد که مرورگرها از طرف وب سرورها ذخیره می کنند. هر بار درخواست های یک مرورگر از یک صفحه ی فرم و از یک سرور خاص، به کوکی که در ابتدا دریافت شده است پس داده می شوند.</p><p>اجازه دهید نگاهی به نحوه ای که این عمل ممکن است انجام شود بیاندازیم. هنگامی که شما مرورگر خود را باز می کنید و درون آن google.com را تایپ می کنید، مرورگر شما یک درخواست HTTP را به گوگل می فرستد که با چیزی شبیه به این شروع می شود:</p><code class="language-">GET / HTTP/1.1
Host: google.com
...</code><p>زمانی که گوگل پاسخ می دهد، یک پاسخ HTTP شبیه به پاسخ زیر خواهد بود:</p><code class="language-">HTTP/1.1 200 OK
Content-Type: text/html
Set-Cookie: PREF=ID=5b14f22bdaf1e81c:TM=1167000671:LM=1167000671;
            expires=Sun, 17-Jan-2038 19:14:07 GMT;
            path=/; domain=.google.com
Server: GWS/2.1
...</code><p>به هدر Set_Cookie دقت کنید. مرورگر شما مقدار کوکی که از این قرار است ذخیره خواهد کرد (<bdo class="leftInline">PREF=ID=5b14f22bdafle81c:TM=1167000671:LM=1167000671</bdo>) و در هر بار که شما به سایت دسترسی پیدا کنید آن را به گوگل بر می گرداند. بنابراین در مرتبه ی بعدی که به گوگل دسترسی پیدا می کنید، مرورگر شما یک درخواست مانند زیر را ارسال خواهد کرد:</p><code class="language-">GET / HTTP/1.1
Host: google.com
Cookie: PREF=ID=5b14f22bdaf1e81c:TM=1167000671:LM=1167000671
...</code><p>سپس گوگل می تواند از آن مقدار کوکی برای دانستن این که شما با کسی که قبل تر دسترسی پیدا کرده است یک فرد همسان می باشید استفاده می کند. این مقدار ممکن است برای مثال، یک کلید درون یک پایگاه داده که اطلاعات کاربر را ذخیره می کند باشد. گوگل می تواند (انجام می دهد) از آن برای نمایش نام کاربری حساب شما در صفحه استفاده کند.</p><h4>قرار دادن و گرفتن کوکی ها</h4><p>هنگامی که در جنگو با ماندگاری سر و کار دارید، بیشتر اوقات از seesion سطح بالا و یا از فریم ورک یا چارچوب های کاربر بحث شده در این آموزش از کتاب، استفاده خواهید کرد. با این حال، ابتدا به نحوه ی خواندن و نوشتن کوکی ها در سطح پایین نگاهی بیاندازید. این باید به فهم بقیه ی ابزار بحث شده در آموزش و در صورتی که شما بخواهید به صورت مستقیم از کوکی ها استفاده کنید به شما کمک خواهد کرد.</p><p>خواندن کوکی ها ساده می باشد. هر شیء HttpRequest دارای یک شیء COOKIES می باشد که مانند دیکشنری عمل می کند؛ می توانید برای خواند هر کوکی که مرورگر به view ارسال می کند از آن استفاده کنید:</p><code class="language-python">def show_color(request):
    if "favorite_color" in request.COOKIES:
        return HttpResponse("Your favorite color is %s" % \
            request.COOKIES["favorite_color"])
    else:
        return HttpResponse("You don't have a favorite color.")</code><p>نوشتن کوکی ها قدری پیچیده تر می باشد. نیاز است که از متد <bdo class="leftInline">set_cookie()</bdo> در یک شیء HttpResponse استفاده کنید. در زیر مثالی وجود دارد که کوکی favorite_color مستقر در یک پارامتر GET را قرار می دهد:</p><code class="language-python">def set_color(request):
    if "favorite_color" in request.GET:

        # Create an HttpResponse object...
        response = HttpResponse("Your favorite color is now %s" % \
            request.GET["favorite_color"])

        # ... and set a cookie on the response
        response.set_cookie("favorite_color",
                            request.GET["favorite_color"])

        return response

    else:
        return HttpResponse("You didn't give a favorite color.")</code><p>می توانید همچنین یک تعداد از آرگومان های اختیاری را به <bdo class="leftInline">response.set_cookie()</bdo> که جنبه هایی از کوکی را کنترل می کند ارسال کنید. همانطور که در جدول 1-14 مشاهده می کنید.</p><img src="https://oruji.github.io/static/img/table.svg" alt="جدول" class="yaddasht"><h4>جدول ۱-۱۴</h4><ul class="myscroll"><table class="note"><tbody><tr><th style="
    min-width: 100px;
    width: 100px;
">پارامتر</th><th style="
    min-width: 100px;
    width: 100px;
">پایگاه داده</th><th style="
    min-width: 300px;
">توضیح</th></tr><tr><td>Max_age</td><td>None</td><td>عمر (بر حسب ثانیه) که کوکی باید زنده باشد. در صورتی که این پارامتر None باشد، کوکی تنها تا زمانی که مرورگر بسته شود زنده خواهد ماند.</td></tr><tr><td>expire</td><td>None</td><td>زمان و تاریخ واقعی ای، که کوکی باید از بین برود که باید در قالب بندی "Wdy, DD-Mth-YY HH:MM:SS GMT" باشد. در صورت داده این پارامتر، پارامتر max_age باز نویسی می شود.</td></tr><tr><td>path</td><td>"/"</td><td>پیشوند مسیری که کوکی برای آن معتبر است. مرورگرها کوکی را تنها به صفحاتی که تحت این مسیر پیشوند می باشد بر می گرداند، بنابراین شما می توانید از این برای جلوگیری از ارسال کوکی ها به بخش های دیگر سایت استفاده کنید.<br>این پارامتر به ویژه هنگامی که سطح زیادی زا دامنه های سایت را کنترل نمی کنید مفید است.</td></tr><tr><td>domain</td><td>None</td><td>دامنه ای که این کوکی برای آن معتبر است. می توانید از این پارامتر برای قرار دادن یک کوکی cross-domain استفاده کنید. برای مثال، domain=".example.com" یک کوکی قرار خواهد داد که توسط دامنه های www.example.com، <bdo class="leftInline">www2.example.com</bdo> و sub.domain.example.com قابل خواندن می باشد.<br>در صورتی که این پارامتر None قرار داده شود، یک کوکی تنها توسط دامنه ای که آن را قرار داده قابل خواندن خواهد بود.</td></tr><tr><td>secure</td><td>False</td><td>در صورتی که مقدار این پارامتر را True قرار داده شود، این پارامتر به مرورگر خواهد گفت که این کوکی را تنها برای صفحاتی که HTTPS می باشند در دسترس قرار بده.</td></tr></tbody></table></ul><h4>The Mixed Blessing of Cookies</h4><p>ممکن است دقت کرده باشید که یک تعداد از مشکلات بالقوه روش کار با کوکی ها وجود دارند. اجازه دهید برخی از این مشکلات را مورد بررسی قرار دهیم:</p><ul><li>ذخیره سازی کوکی ها ارادی می باشد؛ یک کلاینت ملزم به قبول یا ذخیره کوکی نمی باشد. در واقع، تمام مرورگرها کاربران را قادر به کنترل سیاست خود برای قبول کردن کوکی ها می کند در صورتی که می خواهید تنها کوکی های واجبی که در وب وجود دارند را تماشا کنید، option مرورگر خود یعنی "prompt to accept every cookie" را روشن کنید.<p>با وجود تقریبا استفاده ی جهانی آنها، کوکی ها هنوز غیر قابل اطمینان تلقی می شوند. این بدان معنی است که توسعه دهندگان باید بررسی کنند که یک کاربر در واقع کوکی ها را قبل اعتماد به آن ها قبول کرده است.</p></li><li>کوکی ها (به ویژه آن هایی که در HTTPS ارسال نمی شوند) امن نمی باشند. چرا که داده ی HTTP به صورت متن ساده ارسال می شود، کوکی ها به شدت در برابر حملات جاسوسی آسیب پذیر می باشند. این بدین معنی است که، یک مهاجم جاسوس می تواند یک کوکی را قطع کرده و آن را بخواند. این بدان معنی است که نباید هرگز اطلاعات حساس را در یک کوکی ذخیره کرد.<p>حتی یک حمله ی مخرب تر که بک حمله ی man-in-the-middle معروف است وجود دارد، در جایی که یک مهاجم یک کوکی را قطع می کند و از برای نشان دادن خود به صورت یک کاربر دیگر استفاده می کند. <a href="https://oruji.github.io/django/security/" class="content" title="امنیت">آموزش امنیت</a> به تفصیل این مسائل و راه ها جلوگیری از آن را توضیح داده است.</p></li><li>کوکی ها حتی از دریافت کنندگان در نظر گرفته ی خود نیز امن نمی باشد. اغلب مرورگر ها روشی ساده برای ویرایش محتوای کوکی های منحصر به فرد تهیه می کنند، و کاربران خبره می توانند همواره با استفاده از ابزاری مانند <bdo class="leftInline">mechanize (http://wwwsearch.sourceforge.net/mechanize)</bdo> درخواست های HTTP به صورت دستی بسازند.<p>بنابراین شما نمی توانید داده ی درون کوکی ها را که برای دستکاری حساس می باشند را ذخیره کنید. اشتباه رایج در این سناریو ذخیره چیزی شبیه به <bdo class="leftInline">IsLoggedIn=1</bdo> در یک کوکی در هنگامی که کاربر وارد شده است می باشد. متعجب می شوید وقتی تعدادی از سایت ها این اشتباه طبیعی را انجام می دهند؛ فریب دادن سیستم های امنیتی این سایت ها تنها یک ثانیه طول می کشد.</p></li></ul><h3>فریم ورک یا چارچوب Session جنگو</h3><p>با تمام این محدودیت ها و حفره های امنیتی بالقوه، واضح است، آن کوکی ها و session های مقاوم مثال هایی از نقطه های درد در توسعه ی وب می باشند. البته، هدف جنگو داروی مسکن موثر بودن می باشد، بنابراین جنگو حاوی یک فریم روک session طراحی شده جهت تسکین دادن این سختی ها برای شما می باشد.</p><p>این چارچوب session به شما اجازه می دهد داده ی دلخواه را بر اساس هر بازدید کننده ی سایت ذخیره و بازیابی کنید. این فریم ورک داده را در سمت سرور ذخیره می کند و ارسال و دریافت کوکی ها را حذف می کند. کوکی ها تنها از یک ID هش شده استفاده می کنند – نه خود داده – در نتیجه شما را از مشکلات رایج کوکی محافظت می کند.</p><p>اجازه دهید به نحوه ی فعال کردن session ها و استفاده کردن از آن ها در view ها بپردازیم.</p><h4>فعال کردن Session ها</h4><p>session ها از طریق قسمتی از middleware (به <a href="https://oruji.github.io/django/form/" class="content" title="آموزش فرم جنگو">فرم</a> مراجعه کنید) و مدل جنگو  اجرا می شوند. جهت فعال کردن session ها، نیاز است مراحل زیر را انجام دهید:</p><ol><li>تنظیم MIDDLEWARE_CLASSES را ویرایش کرده و اطمینان حاصل کنید که MIDDLEWARE_CLASSES حاوی 'django.contrib.sessions.middleware.SessionMiddleware'می باشد.</li><li>اطمینان حاصل کنید که 'django.contrib.sessions' درون تنظیم INSTALLED_APPS وجود دارد (و در صورتیکه ملزم به اضافه کردن آن هستید دستور manage.py syncdb را اجرا کنید).</li></ol><p>اسکلت بندی پیشفرض تنظیمات ایجاد توسط startproject دارای هر دوی این قسمت ها فوق می باشد، بنابراین در صورتی که آن ها را حذف نکرده باشید، برای کار کردن session ها نیازی به تغییر چیزی نیست.</p><p>در صورتی که نمی خواهید از session ها استفاده کنید، ممکن است بخواهید خط SessionMiddleware را از MIDDLEWARE_CLASSES و 'django.contrib.sessions'از INSTALLED_APPS خود حذف کنید. این شما را تنها از مقدار کمی از بار اضافی حفظ می کند، ولی هر قسمت کوچکی شمارش می شوند.</p><h4>استفاده از Session ها در view ها</h4><p>هنگامی که SessionMiddleware فعال شده است، هر شیء HttpRequest – اولین آرگومان برای هر تابع view جنگو – دارای یک attribute، seesion خواهد بود که یک شیء شبیه به دیکشنری می باشد. می تواند درست مثل یک دیکشنری معمولای از آن استفاده کنید. برای مثال در یک view می توانید کاری شبیه به زیر را انجام دهید:</p><code class="language-python"># Set a session value:
request.session["fav_color"] = "blue"

# Get a session value -- this could be called in a different view,
# or many requests later (or both):
fav_color = request.session["fav_color"]

# Clear an item from the session:
del request.session["fav_color"]

# Check if the session has a given key:
if "fav_color" in request.session:
    ...</code><p>همچنین می توان از متدهای دیگر دیکشنری همانند <bdo class="leftInline">keys()</bdo> و <bdo class="leftInline">items()</bdo> در request.session استفاده کنید.</p><p>تعدادی قوانین ساده برای استفاده ی موثر از session های جنگو وجود دارد:</p><ul><li>از رشته های معمولی پایتون به صورت کلیدهای دیکشنری در request.session (مخالف integer ها، شیء ها و غیره ...) استفاده کنید.</li><li>کلیدهای دیکشنری session که با یک خط تیره شروع می شوند، برای استفاده ی داخلی توسط جنگو رزرو شده اند. در عمل، فریم ورک تنها از تعداد کمی از متغیرهای session با خط تیره شروع شده استفاده می کند، ولی در صورتی که در مورد این قبیل متغیرهای اطلاعاتی ندارید (و اگر تمایل دارید با هر تغییراتی در خود جنگو مطابق باشید)، استفاده از پیشوندهای خط تیره، از تداخل جنگو با برنامه ی شما جلوگیری می کند.<p>برای مثال، از کلید session با نام _fav_color، مانند زیر استفاده نکنید:</p><code class="language-python">request.session['_fav_color'] = 'blue' # Don't do this!</code></li><li>request.session را با یک شیء جدید جایگزین نکنید، و به attribute های آن دسترسی پیدا نکرده و چیزی در آن ها قرار ندهید. از آن مانند یک دیکشنری پایتون استفاده کنید. مثال:<code class="language-python">request.session = some_other_object # Don't do this!

request.session.foo = 'bar' # Don't do this!</code></li></ul><p>اجازه دهید مثال های کوچکی را ذکر کنیم. view ساده ی زیر بعد از این که کاربر یک کامنت را پست می کند مقدار True را در یک متغیر has_commented قرار می دهد. جلوگیری از پست کردن بیشتر از یک کامنت توسط کاربر ساده می باشد:</p><code class="language-python">def post_comment(request):
    if request.method != 'POST':
        raise Http404('Only POSTs are allowed')

    if 'comment' not in request.POST:
        raise Http404('Comment not submitted')

    if request.session.get('has_commented', False):
        return HttpResponse("You've already commented.")

    c = comments.Comment(comment=request.POST['comment'])
    c.save()
    request.session['has_commented'] = True
    return HttpResponse('Thanks for your comment!')
view ساده ی ورودی یک عضو در سایت:</code><p>view ساده ی ورودی یک عضو در سایت:</p><code class="language-python">def login(request):
    if request.method != 'POST':
        raise Http404('Only POSTs are allowed')
    try:
        m = Member.objects.get(username=request.POST['username'])
        if m.password == request.POST['password']:
            request.session['member_id'] = m.id
            return HttpResponseRedirect('/you-are-logged-in/')
    except Member.DoesNotExist:
        return HttpResponse("Your username and password didn't match.")</code><p>و کد زیر خروج یک عضو از سایت که از طریق <bdo class="leftInline">login()</bdo> فوق وارد سایت شده است:</p><code class="language-python">def logout(request):
    try:
        del request.session['member_id']
    except KeyError:
        pass
    return HttpResponse("You're logged out.")</code><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>نکته</h4><p>در عمل، روش فوق روشی مناسبی برای ورودی کاربران نمی باشد. فریم ورک authentication که به طور مختصر بحث شده است این وظیفه را برای شما بسیار قدرمتند و با روشی مفید انجام می دهد. این مثال ها عمدا ساده می باشند، به طوری که شما بتوانید به راحتی در جریان کار قرار بگیرید.</p></ul><h4>آزمون کوکی های ارسال شده</h4><p>همانطور که در بالا ذکر شد، نمی توان به هر کوکی ارسال شده ی مرورگر اطمینان کرد. بنابراین، برای راحتی کار، جنگو روشی ساده برای آزمون کوکی های ارسال شده ی مرورگر تهیه کرده است. تنها کافیست <bdo class="leftInline">request.session.set_test_cookie()</bdo> را در یک view فراخوانی کرده و <bdo class="leftInline">request.session.test_cookie_worked()</bdo> را در view بعدی بررسی کنید – نه در فراخوانی view همسان.</p><p>این جدایی بین <bdo class="leftInline">set_test_cookie()</bdo> و test_cookie_worked به دلیل روش کار کوکی ها ضروری می باشد. زمانی که شما یک کوکی را قرار می دهید، در واقع شما نمی توانید تا درخواست بعدی مرورگر بگویید یک مرورگر آن را ارسال کرده است.</p><p>استفاده از <bdo class="leftInline">delete_test_cookie()</bdo> برای تمیز کردن بعد از خودتان تمرین خوبی می باشد. این عمل را بعد از تایید کارکرد کوکی آزمون انجام دهید.</p><p>در زیر مثال کاربرد معمولی موضوع فوق وجود دارد:</p><code class="language-python">def login(request):

    # If we submitted the form...
    if request.method == 'POST':

        # Check that the test cookie worked (we set it below):
        if request.session.test_cookie_worked():

            # The test cookie worked, so delete it.
            request.session.delete_test_cookie()

            # In practice, we'd need some logic to check username/password
            # here, but since this is an example...
            return HttpResponse("You're logged in.")

        # The test cookie failed, so display an error message. If this
        # were a real site, we'd want to display a friendlier message.
        else:
            return HttpResponse("Please enable cookies and try again.")

    # If we didn't post, send the test cookie along with the login form.
    request.session.set_test_cookie()
    return render_to_response('foo/login_form.html')</code><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>نکته</h4><p>یک بار دیگر، توابع داخلی authentication این بررسی را برای شما انجام می دهند.</p></ul><h4>استفاده از Session ها خارج از view ها</h4><p>به طور داخلی، هر session تنها یک مدل جنگوی معمولی تعریف شده در django.contrib.sessions.models می باشد. هر session توسط هش تصادفی کمتر یا بیشتر <bdo class="leftInline">32</bdo> حرفی در یک کوکی شناسایی می شود. به این دلیل که session یک مدل معمولی می باشد، می توان با استفاده از API معمولی پایگاه داده ی جنگو به session ها دسترسی پیدا کرد:</p><code class="language-python">&gt;&gt;&gt; from django.contrib.sessions.models import Session
&gt;&gt;&gt; s = Session.objects.get(pk='2b1189a188b44ad18c35e113ac6ceead')
&gt;&gt;&gt; s.expire_date
datetime.datetime(2005, 8, 20, 13, 35, 12)</code><p>برای بدست آوردن داده ی session واقعی، نیاز به فراخوانی <bdo class="leftInline">get_decoded()</bdo> می باشد. این موضوع ضروری می باشد، چرا که دیکشنری در قالب بندی رمزی شده ذخیره شده است:</p><code class="language-python">&gt;&gt;&gt; s.session_data
'KGRwMQpTJ19hdXRoX3VzZXJfaWQnCnAyCkkxCnMuMTExY2ZjODI2Yj...'
&gt;&gt;&gt; s.get_decoded()
{'user_id': 42}</code><h4>زمانی که Session ها ذخیره شده اند</h4><p>به طور پیشفرض، جنگو تنها در صورتی که session تغییر کند آن ها را درون پایگاه داده ذخیره می کند – این بدین معنی است که اگر هر کدام از مقادیر دیکشنری آن اختصاص داده شود یا حذف شود:</p><code class="language-python"># Session is modified.
request.session['foo'] = 'bar'

# Session is modified.
del request.session['foo']

# Session is modified.
request.session['foo'] = {}

# Gotcha: Session is NOT modified, because this alters
# request.session['foo'] instead of request.session.
request.session['foo']['bar'] = 'baz'</code><p>برای تغییر این رفتار پیشفرض، مقدار SESSION_SAVE_EVERY_REQUEST را True قرار دهید. در صورتی که SESSION_SAVE_EVERY_REQUEST، True باشد، جنگو در هر درخواست تنها درون پایگاه داده ذخیره می کند، حتی اگر تغییر نکرده باشد.</p><p>توجه داشته باشید که کوکی session تنها زمانی که یک session ساخته شده یا تغییر کرده باشد فرستاده می شود. در صورتی که SESSION_SAVE_EVERY_REQUEST، True باشد، کوکی session در هر درخواست فرستاده خواهد شد. به طور یکسان، بخش expires از یک کوکی session در هر بار که کوکی session فرستاده شود به روز رسانی می شود.</p><h4>Session های Browser-Length در مقابل Session های مقاوم</h4><p>ممکن است متوجه شده باشید که کوکی گوگل فرستاده شده به ما در ابتدای این آموزش حاوی expires=Sun، <bdo class="leftInline">17-Jan-2038 19:14:07 GMT;</bdo> بود. کوکی ها به طور اختیاری می توانند حاوی یک تاریخ انقضا باشند که مرورگر را در هنگام حذف کوکی آگاه می سازد. در صورتی که یک کوکی حاوی مقدار انقضا نباشد، زمانی که کاربر پنجره ی مرورگر را ببندد از بین می رود. می توان رفتار فریم ورک یا چارچوب session را رابطه با تنظیم SESSION_EXPIRE_AT_BROWSER_CLOSE کنترل کرد.</p><p>به طور پیشفرض، مقدار SESSION_EXPIRE_AT_BROWSER_CLOSE، False در نظر گرفته شده است، که بدین معنی می باشد که کوکی های session در مرورگرهای کاربران برای SESSION_COOKIE_AGE ثانیه (که پیشفرض آن دو هفته یا <bdo class="leftInline">1,209,600</bdo> ثانیه) می باشد. در صورتی که نمی خواهید مردم در هر بار که مرورگر را باز می گنند به سایت log in نشوند از این تنظیم می توانید استفاده کنید.</p><p>در صورتی که مقدار SESSION_EXPIRE_AT_BROWSER_CLOSE، True باشد، جنگو از کوکی های browser-length استفاده خواهد کرد.</p><h4>تنظیمات دیگر Session</h4><p>در کنار تنظیمات ذکر شده، چند تنظیم دیگر بر نحوه ی استفاده ی فریم ورک session جنگو از کوکی ها تاثیر می گذارد، همانطور که در جدول 2-14 نشان داده شده است.</p><img src="https://oruji.github.io/static/img/table.svg" alt="جدول" class="yaddasht"><h4>جدول ۲-۱۴</h4><ul class="myscroll"><table class="note"><tbody><tr><th style="min-width: 222px;width: 222px;">تنظیم</th><th style="
    min-width: 300px;
">توضیح</th><th style="
    width: 113px;
    min-width: 113px;
">پیشفرض</th></tr><tr><td>SESSION_COOKIE_DOMAIN</td><td>دامنه ی مورد استفاده برای کوکی های session. برای این تنظیم یک رشته مانند ".example.com" برای کوکی های cross‑domain قرار دهید، یا برای یک کوکی استاندارد از None استفاده کنید.</td><td>None</td></tr><tr><td>SESSION_COOKIE_NAME</td><td>نام کوکی ای که برای session ها استفاده می شود. این می تواند هر رشته ای باشد.</td><td>"sessionid"</td></tr><tr><td>SESSION_COOKIE_SECURE</td><td>در دست ترجمه/تالیف .... در صورتی که این تنظیم True باید، کوکی به صورت "امن" علامت گذاری خواهد شد، که بدین معناست که مرورگر ها مطمئن خواهند بود که کوکی تنها از طریق HTTPS ارسال شده است.</td><td>False</td></tr></tbody></table></ul><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>جزئیات فنی</h4><p>محض کنجکاوی، در زیر چند نکته ی فنی درباره ی کار عملکرد داخلی فریم ورک session بیان شده است:</p><ul><li>در دست ترجمه/تالیف .... برای کسب اطلاعات درمورد کارکرد ماژول داخلی پایتون یعنی pickle مستندات پایتون مراجعه کنید.</li><li>داده ی session در جدول پایگاه داده با نام django_session ذخیره می شود.</li><li>در دست ترجمه/تالیف .... در صورتی که هرگز به request.session دسترسی ندارید، جنگو به آن جدول پایگاه داده مراجعه می کند.</li><li>جنگو در صورت نیاز یک کوکی ارسال می کند. در صورتی که هیچ داده ی session ای قرار نگرفته باشد، جنگو کوکی session ای ارسال نخواهد کرد (مگر اینکه مقدار SESSION_SAVE_EVERY_REQUEST، True قرار داده شده باشد).</li><li>فریم ورک session جنگو به طور کلی و تنها بر اساس کوکی می باشد. در دست ترجمه/تالیف ....<p>این یک تصمیم طراحی بین المللی می باشد. قرار دادن session ها در URL ها نه تنها باعث زشت شدن URL ها می شود، بلکه همچنین سایت شما را برای یک فرم خاص از سرقت هدر Referer آسیب پذیر می سازد.</p></li></ul><p>در صورتی که هنوز کنجکاو هستید، منبع بسیار آسان می باشد؛ برای اطلاعات بیشتر به django.contrib.sessions نگاهی بیاندازید.</p></ul><h3>کاربران و تصدیق</h3><p>session ها راه تداوم داده را از بین چندین درخواست مرورگر به ما می دهند؛ دومین قسمت معادله استفاده از آن session ها برای ورود کاربر می باشد. البته، نمی توانیم به راحتی به هر کاربری که وارد می شود اعتماد کنیم، بنابراین نیاز به تصدیق کردن آن ها در طول مسیر می باشد.</p><p>به طور طبیعی، جنگو ابزاری را جهت این وظایف مشترک (و بسیاری دیگر) تهیه کرده است. سیستم تصدیق کاربر جنگو حساب ها کاربر، حق دسترسی ها، و session های بر پایه ی کوکی کاربر را کنترل می کند. این سیستم اغلب به صورت یک سیستم auth/auth (تصدیق و تصدیق) مورد مراجعه قرار گرفته است. آن نام عدم اعتبار کاربران را اغلب با یک پردازش دو مرحله ای تشخیص می دهد. نیاز به نکات زیر می باشد:</p><ol><li>تصدیق کاربری که ادعای کاربر بودن می کند (معمولا توسط بررسی یک نام کاربری و رمز عبور در مقابل یک پایگاه داده از کاربران)</li><li>تصدیق این که کاربر مجاز به اجرای برخی اعمال داده شده (معمولا توسط بررسی در یک جدول از حق دسترسی ها) می باشد.</li></ol><p>در ادامه ی این نیازمندی ها، سیستم auth/auth جنگو حاوی تعدادی از بخش ها می باشد:</p><ul><li>کاربران: افرادی که در سایت شما عضویت دارند</li><li>حق دسترسی ها: پرچم های دودویی (yes/no) طراحی شده برای مشخص کردن اینکه آیا یک کاربر می تواند یک وظیفه ی خاص را انجام دهد</li><li>گروه ها: روشی عمومی جهت بکار بردن لیبل ها و حق دسترسی به بیشتر از یک کاربر</li><li>پیام ها: روشی ساده برای به صف کردن و نمایش سیستم پیام ها به کاربران</li></ul><p>در صورتی که  از ابزار مدیر (بحث شده در <a href="https://oruji.github.io/django/admin-site/" class="content" title="سایت مدیر">سایت مدیر</a>) استفاده کرده اید، شما بسیاری از این ابزار را مشاهده کرده اید، و در صورتی که کاربران و گروه ها را در ابزار مدیر ویرایش کرده باشید، شما در واقع در جدول پایگاه داده ی سیستم auth داده ها را ویرایش کرده اید.</p><h4>فعال ساختن پشتیبانی تصدیق</h4><p>همانند ابزار session، پشتیبانی تصدیق به صورت یک برنامه ی جنگو در django.contrib که نیاز به نصب شدن دارد همراه است. همچنین مانند ابزار session، باید به طور پیشفرض نصب شده باشد، ولی در صورتی که شما آن را حذف کرده باشید، نیاز است مراحل زیر را برای نصب آن دنبال کنید:</p><ol><li>اطمینان حاصل کنید فریم ورک session همانطور که قبلا در این آموزش از کتاب توضیح داده شد نصب شده باشد. پیگیری کاربران بدیهی است که مستلزم کوکی ها می باشد، و در نتیجه در فریم ورک session ساخته می شود.</li><li>'django.contrib.auth' را در تنظیم INSTALLED_APPS قرار داده و دستور manage.py syncdb را جهت نصب جداول پایگاه داده ی مناسب اجرا کنید.</li><li>از وجود 'django.contrib.auth.middleware.AuthenticationMiddleware'درون تنظیم MIDDLEWARE_CLASSES اطمینان حاصل کنید – بعد از SessionMiddleware.</li></ol><p>با انجام مراحل فوق، همه چیز برای سر و کار داشتن با کاربران در توابع view آماده می باشد. رابط اصلی که شما برای دسترسی به کاربران در یک view از آن استفاده خواهید کرد request.user می باشد؛ این یک شیء است که کاربر فعلی وارد شده به سایت را نشان می دهد. در صورتی که کاربر وارد نشده باشد، به جای آن یک شیء AnonymousUser خواهد بود (برای جزئیات بیشتر به ادامه ی این بخش نگاه بیاندازید).</p><p>می توانید به سادگی در صورتی که یک کاربر وارد شده است، با متد <bdo class="leftInline">is_authenticated()</bdo> تشخیص دهید:</p><code class="language-python">if request.user.is_authenticated():
    # Do something for authenticated users.
else:
    # Do something for anonymous users.</code><h4>استفاده از کاربران</h4><p>هنگامی که شما یک کاربر دارید – اغلب از request.user، ولی از طریق یکی از روش های مختصر توضیح داده شده – تعدادی از فیلدها و متدهای در دسترس در آن شیء دارید. شیء های AnonymousUser برخی از این رابط ها را تقلید کرده است، ولی نه تمام آن را، بنابراین باید همواره <bdo class="leftInline">user.is_authenticated()</bdo> را قبل از آنکه کاربری را که با آن سر و کار دارید را با حسن نیت تصور کنید بررسی کنید.. جدول 3-14 و 4-14 فیلد ها و متد ها را به ترتیب در شیء های User لیست کرده است.</p><img src="https://oruji.github.io/static/img/table.svg" alt="جدول" class="yaddasht"><h4>جدول ۳-۱۴</h4><ul class="myscroll"><table class="note"><tbody><tr><th width="15%" style="
    width: 140px;
    min-width: 140px;
">فیلد</th><th width="85%" style="
    min-width: 400px;
">توضیح</th></tr><tr><td>username</td><td>الزامی؛ 30 حرف یا کمتر. تنها حروف الفبایی (حروف الفبا، عددها، و خط تیره)</td></tr><tr><td>First_name</td><td>اختیاری؛ 30 حرف یا کمتر</td></tr><tr><td>Last_name</td><td>اختیاری؛ 30 حرف یا کمتر</td></tr><tr><td>email</td><td>اختیاری؛ آدرس پست الکترونیک</td></tr><tr><td>password</td><td>الزامی؛ یک هش و ابر داده از رمز عبور (جنگو رمز عبور خام را ذخیره نمی کند). برای اطلاعات بیشتر به بخش "رمزهای عبور" مراجعه کنید.</td></tr><tr><td>Is_staff</td><td> Boolean. اینکه کاربر می تواند به سایت مدیر دسترسی پیدا کند یا خیر را مشخص می کند.</td></tr><tr><td>Is_active</td><td>Boolean. این که این حساب می تواند برای ورود استفاده شده باشد یا خیر را مشخص می کند. این پرچم را به جای حذف حساب ها مقدار False قرار دهید.</td></tr><tr><td>Is_superuser</td><td>Boolean. اینکه این کاربر دارای تمام دسترسی ها بدون اختصاص دادن آن ها به طور واضح می باشد یا خیر را مشخص می کند.</td></tr><tr><td>Last_login</td><td>یک datetime از آخرین ورود کاربر. به طور پیشفرض زمان/تاریخ فعلی در آن قرار دارد.</td></tr><tr><td>date_joined</td><td>تشخیص datetime زمانی که حساب ساخته شده است. به طور پیشفرض زمانی که حساب ساخته شده است مقدار آن زمان/تاریخ فعلی می باشد.</td></tr></tbody></table></ul><img src="https://oruji.github.io/static/img/table.svg" alt="جدول" class="yaddasht"><h4>جدول ۴-۱۴</h4><ul class="myscroll"><table class="note"><tbody><tr><th style="
    min-width: 235px;
    width: 235px;
">متد</th><th style="
    min-width: 300px;
">توضیح</th></tr><tr><td><bdo class="leftInline">is_authenticated()</bdo></td><td>همواره شیء های User "واقعی" مقدار True بر می گرداند. در صورتی که کاربر تصدیق شده باشد این روشی برای گفتن می باشد. این هیچ اشاره ای به حق دسترسی ها نداشته و فعال بودن کاربر را نیز بررسی نمی کند. تنها این را نشان می دهد که کاربر با موفقیت تصدیق شده است.</td></tr><tr><td><bdo class="leftInline">is_anonymous()</bdo></td><td>تنها برای شیء های AnonylousUser مقدار True بر می گرداند (و مقدار False برای شیء های User "واقعی"). عموما، باید استفاده از <bdo class="leftInline">is_authenticated()</bdo> را برای این متد ترجیح دهید.</td></tr><tr><td><bdo class="leftInline">get_full_name()</bdo></td><td>first_name را بعلاوه ی last_name، با یک فاصله در بین آن ها بر می گرداند.</td></tr><tr><td><bdo class="leftInline">set_password(passwd)</bdo></td><td>رمز عبور کاربر را برای رشته ی خام داده شده قرار می دهد، در دست ترجمه/تالیف .... در واقع این متد شیء User را ذخیره نمی کند.</td></tr><tr><td><bdo class="leftInline">check_password(passwd)</bdo></td><td>در صورتی که رشته ی خام داده شده رمز عبور درست کاربر باشد مقدار True بر می گرداند. در دست ترجمه/تالیف ....</td></tr><tr><td><bdo class="leftInline">get_group_permissions()</bdo></td><td>لیستی از رشته های حق دسترسی که کاربر از طریق گروهی که به آن تعلق دارد در اختیار دارد را بر می گرداند.</td></tr><tr><td><bdo class="leftInline">get_all_permissions()</bdo></td><td>لیستی از رشته ی حق دسترسی که کاربر دارد، هم حق دسترسی گروه هم کاربر.</td></tr><tr><td><bdo class="leftInline">has_perm(perm)</bdo></td><td>در صورتی که کاربر دارای حق دسترسی مشخص شده باشد مقدار True بر می گرداند و perm قالب بندی "package.codename" می باشد. در صورتی که کاربر غیر فعال باشد، این متد همواره مقدار False بر می گرداند.</td></tr><tr><td><bdo class="leftInline">has_perms(perm_list)</bdo></td><td>در صورتی که کاربر دارای تمام حق دسترسی های تعیین شده باشد مقدار True بر می گرداند. در صورتی که کاربر غیر فعال باشد، هموراه این متد مقدار False بر می گرداند.</td></tr><tr><td><bdo class="leftInline">has_module_perms(app_lable)</bdo></td><td>در صورتی که کاربر هیچ حق دسترسی ای در app_lable داده شده نداشته باشد مقدار True بر می گرداند. در صورتی که کاربر غیر فعال باشد، این متد هموراه مقدار False بر می گرداند.</td></tr><tr><td><bdo class="leftInline">get_and_delete_messages()</bdo></td><td>لیستی از شیء های Message در صف کاربر بر می گرداند و پیام های صف را حذف می کند.</td></tr><tr><td><bdo class="leftInline">email_user(subj, msg)</bdo></td><td>یک پست الکترونیکی به کاربر می فرستد. این پست الکترونیکی از تنظیم DEFAULT_FROM_EMAIL فرستاده می شود. همچنین می توانید یک آرگومان سوم به نام from_email جهت override آدرس From در پست الکترونیکی ارسال کنید.</td></tr></tbody></table></ul><p>در پایان، شیء های User دارای دو فیلد many-to-many می باشند: groups و permissions. شیء های User می توانند همانند فیلدهای many-to-many دیگر به شیء های مربوط به خود دسترسی پیدا کنند:</p><code class="language-python"># Set a user's groups:
myuser.groups = group_list

# Add a user to some groups:
myuser.groups.add(group1, group2,...)

# Remove a user from some groups:
myuser.groups.remove(group1, group2,...)

# Remove a user from all groups:
myuser.groups.clear()

# Permissions work the same way
myuser.permissions = permission_list
myuser.permissions.add(permission1, permission2, ...)
myuser.permissions.remove(permission1, permission2, ...)
myuser.permissions.clear()</code><h4>وارد و خارج شدن از سایت</h4><p>جنگو برای کنترل ورود و خروج از سایت، برخی توابع داخلی (و چند فوت و فن جذاب) را ارائه کرده است، ولی قبل از آن، اجازه دهید نگاهی به نحوه ی ورود و خروج از سایت را "به صورت دستی" بیاندازیم. جنگو جهت انجام این اعمال در django.contrib.auth دو تابع با نام های <bdo class="leftInline">authenticate()</bdo> و <bdo class="leftInline">login()</bdo> را ارائه کرده است.</p><p>جهت تصدیق یک نام کاربری و رمز عبور داده شده، از <bdo class="leftInline">authenticate()</bdo> استفاده کنید. این تابع دو آرگومان کیورد username و password را دریافت می کند، و در صورتی که رمز عبور برای نام کاربری داده شده معتبر باشد، یک شیء User بر می گرداند. در صورتی که رمز عبور معتبر نباشد، <bdo class="leftInline">authenticate()</bdo> مقدار None بر می گرداند:</p><code class="language-python">&gt;&gt;&gt; from django.contrib import auth
&gt;&gt;&gt; user = auth.authenticate(username='john', password='secret')
&gt;&gt;&gt; if user is not None:
...     print "Correct!"
... else:
...     print "Invalid password."</code><p><bdo class="leftInline">authenticate()</bdo> تنها اعتبار کاربر را تایید می کند. جهت ورود کاربر، از تابع <bdo class="leftInline">loging()</bdo> استفاده کنید. این تابع یک شیء HttpRequest و یک شیء User دریافت کرده و با استفاده از فریم ورک session، ID کاربر را درون session ذخیره می کند.</p><p>مثال زیر نحوه ی استفاده از هر دوی تابع <bdo class="leftInline">authenticate()</bdo> و <bdo class="leftInline">login()</bdo> را درون یک تابع view نشان می دهد:</p><code class="language-python">from django.contrib import auth

def login_view(request):
    username = request.POST.get('username', '')
    password = request.POST.get('password', '')
    user = auth.authenticate(username=username, password=password)
    if user is not None and user.is_active:
        # Correct password, and the user is marked "active"
        auth.login(request, user)
        # Redirect to a success page.
        return HttpResponseRedirect("/account/loggedin/")
    else:
        # Show an error page
        return HttpResponseRedirect("/account/invalid/")</code><p>جهت خروج یک کاربر، از <bdo class="leftInline">django.contrib.auth.logout()</bdo> داخل view خود استفاده کنید. این تابع یک شیء HttpRequest دریافت کرده و هیچ مقداری بر نمی گرداند:</p><code class="language-python">from django.contrib import auth

def logout_view(request):
    auth.logout(request)
    # Redirect to a success page.
    return HttpResponseRedirect("/account/loggedout/")</code><p>دقت داشته باشید که <bdo class="leftInline">auth.logout()</bdo> در صورتی که کاربر وارد سایت نشده باشد، هیچ خطایی ایجاد نمی کند.</p><p>در عمل، نیازی به نوشتن توابع login/logout خودتان نخواهید داشت؛ سیستم تصدیق مجموعه ای از view ها برای کنترل ورود و خروج به طور عمومی ارائه کرده است. اولین گام در استفاده از این view های تصدیق، وصل کردن آن ها به URLconf می باشد. نیاز است تکه کد زیر را اضافه کنید:</p><code class="language-python">from django.contrib.auth.views import login, logout

urlpatterns = patterns('',
    # existing patterns here...
    (r'^accounts/login/$',  login),
    (r'^accounts/logout/$', logout),
)</code><p>/accounts/login/ و /accounts/logout/، URL های پیشفرض می باشند که جنگو برای این view استفاده می کند.</p><p>به طور پیشفرض view، login یک template را در registeration/login.html، render می کند (می توانید نام این template را از طریق ارسال یک آرگومان view اضافه تغییر دهید، ``template_name``). این فرم نیاز دارد حاوی یک فیلد username و یک فیلد password باشد. یک template ساده ممکن است چیزی شبیه به کد زیر باشد:</p><code class="language-django">{% extends "base.html" %}

{% block content %}

  {% if form.errors %}
    &lt;p class="error"&gt;Sorry, that's not a valid username or password&lt;/p&gt;
  {% endif %}

  &lt;form action="" method="post"&gt;
    &lt;label for="username"&gt;User name:&lt;/label&gt;
    &lt;input type="text" name="username" value="" id="username"&gt;
    &lt;label for="password"&gt;Password:&lt;/label&gt;
    &lt;input type="password" name="password" value="" id="password"&gt;

    &lt;input type="submit" value="login"&gt;
    &lt;input type="hidden" name="next" value="{{ next|escape }}"&gt;
  &lt;/form&gt;

{% endblock %}</code><p>در صورتی که وارد شدن موفقیت آمیز باشد، کاربر به طور پیشفرض به /accounts/profile/ تغییر مسیر داده خواهد شد. می توان این حالت را توسط یک فیلد hidden به نام next با URL جهت تغییر مسیر بعد از ورود override کرد. همچنین می تواند این مقدار را به صورت یک پارامتر GET به view، login ارسال کرده و آن به صورت خودکار به صورت متغیر next به context اضافه خواهد شد که می توانید درون آن فیلد hidden آن را درج کنید.</p><p>view، logout کمی متفاوت تر عمل می کند. به طور پیشفرض این view یک template در registration/loggedout.html (که معمولا حاوی یک پیام "you've successfully logged out" می باشد) را render می کند. می توان view را با یک آرگومان اضافه با نام next_page فراخوانی کرد، که view را جهت تغییر مسیر بعد از خروج راهنمایی خواهد کرد.</p><h3>محدودیت دسترسی برای کاربران وارد شده</h3><p>البته، در دست ترجمه/تالیف ....</p><p>به طور ساده، راه خام جهت محدود کردن دسترسی برای صفحات، بررسی <bdo class="leftInline">request.user.is_authenticated()</bdo> و تغییر مسیر به یک صفحه ی ورود می باشد:</p><code class="language-python">from django.http import HttpResponseRedirect

def my_view(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/accounts/login/?next=%s' % request.path)
    # ...</code><p>یا شاید نمایش یک پیام خطا:</p><code class="language-python">def my_view(request):
    if not request.user.is_authenticated():
        return render_to_response('myapp/login_error.html')
    # ...</code><p>به صورت یک میانبر، می توان از decorator مناسب login_required استفاده کرد:</p><code class="language-python">from django.contrib.auth.decorators import login_required

@login_required
def my_view(request):
    # ...</code><p>login_required به شکل زیر عمل می کند:</p><ul><li>در صورتی که کاربر وارد نشده باشد، به /accounts/login/ تغییر مسیر داده می شود، ارسال شدن مسیر URL فعلی در رشته ی کوئری به صورت next، برای مثال: <bdo class="leftInline">/accounts/login/?next=/polls/3/</bdo>.</li><li>در صورتی که کاربر وارد شده باشد، view به صورت معمول اجرا می شود. کد view می تواند. در دست ترجمه/تالیف ....</li></ul><h4>محدودیت دسترسی برای کاربرانی که یک آزمون را رد می کنند</h4><p>محدودیت دسترسی بر پایه ی حق دسترسی ها یا برخی آزمون های دیگر، یا ارائه ی یک مکان مختلف برای view ورود اساسا به یک روش کار می کند.</p><p>روش خام اجرای آزمون در request.user به طور مستقیم درون view می باشد. برای مثال، view زیر برای اطمینان از این که کاربر، وارد شده و دارای حق دسترسی polls.can_vote می باشد یا خیر:</p><code class="language-python">def vote(request):
    if request.user.is_authenticated() and request.user.has_perm('polls.can_vote')):
        # vote here
    else:
        return HttpResponse("You can't vote in this poll.")</code><p>بار دیگر، جنگو یک میانبر با نام user_passes_test ارائه کرده است. این میانبر آرگومان هایی دریافت کرده و یک decorator تخصص یافته برای وضعیت خاص شما تولید می کند:</p><code class="language-python">def user_can_vote(user):
    return user.is_authenticated() and user.has_perm("polls.can_vote")

@user_passes_test(user_can_vote, login_url="/login/")
def vote(request):
    # Code here can assume a logged-in user with the correct permission.
    ...</code><p>user_passes_test یک آرگومان الزامی دریافت می کند: یک قابل فراخوانی که یک شیء User دریافت کرده و در صورتی که کاربر اجازه ی تماشای صفحه را داشته باشد مقدار True بر می گرداند. توجه داشته باشید که user_passes_test به طور اتوماتیک تصدیق شدن کاربر را بررسی نمی کند؛ شما باید آن را برای خودتان انجام دهید.</p><p>همچنین در این مثال آرگومان دوم (اختیاری) نشان داده شده است، که اجازه ی تعیین URL برای صفحه ی خودتان را می دهد (/accounts/login/ به طور پیشفرض). در صورتی که کاربر آزمون را نگذرانده باشد؛ سپس decorator، user_passes_test کاربر را به login_url تغییر مسیر خواهد داد.</p><p>به دلیل آن که بررسی این که یک کاربر دارای یک حق دسترسی خاص است یا خیر یک وظیفه ی نسبتا مشترک می باشد، جنگو یک میانبر برای آن ارائه کرده است که یک decorator با نام <bdo class="leftInline">permission_required()</bdo> می باشد. در دست ترجمه/تالیف ...:</p><code class="language-python">from django.contrib.auth.decorators import permission_required

@permission_required('polls.can_vote', login_url="/login/")
def vote(request):
    # ...</code><p>دقت داشته باشد که همچنین <bdo class="leftInline">permission_required()</bdo> یک پارامتر اختیاری login_url دریافت می کند؛ که این نیز به طور پیشفرض '/accounts/login/' می باشد.</p><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>محدود کردن دسترسی برای view های جنریک</h4><p>یکی از سوالات تکراری پرسیده شده در لیست کاربران جنگو در مورد محدود کردن دسترسی برای یک view جنریک می باشد. برای جواب به این سوال؛ نیاز به نوشتن یک thin wrapper در اطراف view و اشاره URLconf به wrapper خود به جای خود generic view خواهید داشت:</p></ul><code class="language-python">from django.contrib.auth.decorators import login_required
from django.views.generic.date_based import object_detail

@login_required
def limited_object_detail(*args, **kwargs):
    return object_detail(*args, **kwargs)</code><p>البته که می توانید، login_required را با هر decorator محدودیت دیگری جا به جا کنید.</p><h3>مدیریت کاربران، حق دسترسی ها و گروه ها</h3><p>ساده ترین را برای مدیریت سیستم auth تاکنون، از طریق رابط مدیر بوده است. <a href="https://oruji.github.io/django/admin-site/" class="content" title="سایت مدیر">سایت مدیر</a> در مورد نحوه ی استفاده از سایت مدیر جنگو را جهت ویرایش کاربران و کنترل حق دسترسی آن ها  بحث کرده است، و اغلب اوقات شما فقط از این رابط استفاده خواهید کرد.</p><p>هر چند API های سطح پایین ای وجود دارند که شما هنگامی که نیاز به کنترل مستقل دارید از آن ها استفاده کنید، و این API ها را در بخش های بعدی توضیح داده ایم.</p><h4>ساختن کاربران</h4><p>ساختن کاربران با تابع کمکی create_user:</p><code class="language-python">&gt;&gt;&gt; from django.contrib.auth.models import User
&gt;&gt;&gt; user = User.objects.create_user(username='john',
...                                 email='jlennon@beatles.com',
...                                 password='glass onion')</code><p>در این نقطه، user یک رابط نمونه ی User حاضر برای ذخیره شدن در پایگاه داده (<bdo class="leftInline">create_user()</bdo> در واقع <bdo class="leftInline">save()</bdo> خودش را فراخوانی نمی کند) می باشد. همچنین می توانید قبل از ذخیره attribute های آن را تغییر دهید:</p><code class="language-python">&gt;&gt;&gt; user.is_staff = True
&gt;&gt;&gt; user.save()</code><h4>تغییر رمزهای عبور</h4><p>می توان یک رمز عبور را با <bdo class="leftInline">set_password()</bdo> تغییر داد:</p><code class="language-python">&gt;&gt;&gt; user = User.objects.get(username='john')
&gt;&gt;&gt; user.set_password('goo goo goo joob')
&gt;&gt;&gt; user.save()</code><p>attribute، password را به طور مستقیم قرار ندهید، مگر اینکه کاملا بدانید که چه کار می کنید. رمز عبور در واقع به صورت یک salted hash دخیره شده و در نتیجه نمی تواند به طور مستقیم ویرایش شود.</p><p>به طور رسمی تر، attribute، password از یک شیء User یک رشته در این قالب بندی می باشد:</p><code class="language-">hashtype$salt$hash</code><p>آن یک نوع hash، salt و خود hash، جدا شده توسط حرف ($) می باشد.</p><p>hashtype همچنین <bdo class="leftInline">sha1</bdo> (پیشفرض) یا <bdo class="leftInline">md5</bdo> می باشد، الگوریتم استفاده شده برای انجام یک hash یک طرفه از رمز عبور. salt یک رشته ی تصادفی استفاده شده برای اضافه شدن به رمز عبور خام برای ساختن hash برای مثال:</p><code class="language-">sha1$a1976$a36cc8cbf81742a8fb52e221aaeab48ed7f58ab4</code><p>توابع <bdo class="leftInline">User.set.password()</bdo> و <bdo class="leftInline">User.check_password()</bdo> این مقادیر را در پشت صحنه بررسی کرده و قرار می دهند.</p><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>hash های اضافه شده</h4><p>hash تابع یک طرفه ی پنهانی می باشد – بدین معنی که، می توان به سادگی hash مقدار داده شده را محاسبه کرد، ولی گرفتن یک hash و برگرداندن آن به مقدار اصلی آن تقریبا غیر ممکن است.</p><p>در صورتی که رمزهای عبور را به صورت متن ساده ذخیره کرده باشیم، هر کسی که درون پایگاه داده ی دست داشته باشد به سرعت می تواند رمز عبور همه را بفهمد. ذخیره رمزهای عبور به صورت hash ها احتمال به خطر افتادن اطلاعات پایگاه داده را کاهش می دهد.</p><p>هر چند که، یک حمله کنند با رمز عبور پایگاه داده همچنان می تواند یک حمله ی brute-force را اجرا کرده و میلیون ها رمز عبور را به صورت hash در آورده و آن hash ها را با مقادیر ذخیره شده مقایسه کند. این مدتی طول می کشد ولی کمتر آن که شما ممکن است فکر کنید.</p><p>بدتر از آن rainbow table ها می باشند که به صورت عمومی در دسترس هستند، یا پایگاه های داده ی قبل از محاسبه ی hash ها از میلیون ها رمز عبور. با یک rainbow table، یک مهاجم با تجربه می تواند در چند ثانیه تمام رمزهای عبور را بشکند.</p><p>اضافه کردن یک salt – اساسا یک مقدار اولیه تصادفی – برای hash ذخیره شده یک لایه ی دیگری را جهت سختی در شکستن رمزهای عبور اضافه می کند. زیرا salt ها در هر رمزعبوری متفاوت می باشند، آن ها همچنین از استفاده ی rainbow table جلوگیری می کنند؛ در نتیجه مهاجمان مجبور به سقوط در یک حمله ی brute-force می شوند، در دست ترجمه/تالیف ....</p><p>هنگامی hash های salt شده امن ترین روش برای ذخیره رمزهای عبور نیستند، یک حد وسط بین امنیت و راحتی می باشند.</p></ul><h4>کنترل عضویت</h4><p>می توان از این ابزار سطح پایین برای ساختن view هایی که به کاربر جهت عضو شدن برای حساب های جدید اجازه می دهند استفاده کرد. توسعه دهندگان مختلف عضویت را به طور متفاوتی انجام می دهند، بنابراین جنگو نوشتن یک view را برای شما ترک کرده است. خوشبختانه، این کار بسیار ساده می بشاد.</p><p>در ساده طرین حالت، می توان یک view کوچک برای اطلاعات الزامی کاربر و ساختن آن کاربران تهیه کرد. جنگو یک فرم داخلی ارائه کرده است که می توان برای این منظور از آن استفاده کرد، که در مثال زیر استفاده خواهیم کرد:</p><code class="language-python">from django import forms
from django.contrib.auth.forms import UserCreationForm
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response

def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            return HttpResponseRedirect("/books/")
    else:
        form = UserCreationForm()
    return render_to_response("registration/register.html", {
        'form': form,
    })</code><p>این فرم یک template با نام registration/register.html را فرض می کند. در اینجا یک مثال از template مورد نظر وجود دارد:</p><code class="language-django">{% extends "base.html" %}

{% block title %}Create an account{% endblock %}

{% block content %}
  &lt;h1&gt;Create an account&lt;/h1&gt;

  &lt;form action="" method="post"&gt;
      {{ form.as_p }}
      &lt;input type="submit" value="Create the account"&gt;
  &lt;/form&gt;
{% endblock %}</code><h4>استفاده از تصدیق داده در Template ها</h4><p>کاربر وارد شده ی فعلی و حق دسترسی های وی، زمانی که از RequestContext (<a href="https://oruji.github.io/django/template/advance/" class="content" title="template پیشرفته">آموزش template پیشرفته</a> را نگاه کنید) استفاده می کنید در template context در دسترس می باشد.</p><ul><img src="https://oruji.github.io/static/img/note.svg" alt="یادداشت" class="yaddasht
"><h4>نکته</h4><p>از نظر فنی، این متغیرها تنها در صورتی که شما از RequestContext استفاده کنید و تنظیم TEMPLATE_CONTEXT_PROCESSORS حاوی "django.core.context_processors.auth" باشد (که به طور پیشفرض این طور است) در template context در دسترس می باشند. بار دیگر برای اطلاعات بیشتر می توانید به <a href="https://oruji.github.io/django/template/advance/" class="content" title="template پیشرفته">آموزش template پیشرفته</a> مراجعه کنید.</p></ul><p>هنگامی که از RequestContext استفاده می کنید، کاربر فعلی (که می تواند هم یک نمونه از User یا یک نمونه ی AnonymousUser باشد) در متغیر <bdo class="leftInline">template {{ user }}</bdo> ذخیره می شود:</p><code class="language-django">{% if user.is_authenticated %}
  &lt;p&gt;Welcome, {{ user.username }}. Thanks for logging in.&lt;/p&gt;
{% else %}
  &lt;p&gt;Welcome, new user. Please log in.&lt;/p&gt;
{% endif %}</code><p>حق دسترسی های این کاربر در متغیر <bdo class="leftInline">template {{ perms }}</bdo> ذخیره شده اند. این یک پروکسی template‑friendly برای تعدادی از متدهای حق دسترسی می باشد که به طور خلاصه توضیح داده شده است.</p><p>برای استفاده از شیء perms دو روش وجود دارد. می توان در صورتی که کاربر دارای هیچ حق دسترسی برای برخی برنامه های داده شده نداشته باشد، برای بررسی آن از چیزی شبیه به این <bdo class="leftInline">{% if perms.polls %}</bdo> استفاده کرد، یا می توان در صورتی که کاربر دارای حق دسترسی خاصی می باشد برای بررسی آن از چیزی شبیه به این <bdo class="leftInline">{% if perms.polls.can_vote %}</bdo> استفاده کرد.</p><p>در نتیجه، می توان حق دسترسی ها را در عبارت <bdo class="leftInline">template {% if %}</bdo> بررسی کرد:</p><code class="language-django">{% if perms.polls %}
  &lt;p&gt;You have permission to do something in the polls app.&lt;/p&gt;
  {% if perms.polls.can_vote %}
    &lt;p&gt;You can vote!&lt;/p&gt;
  {% endif %}
{% else %}
  &lt;p&gt;You don't have permission to do anything in the polls app.&lt;/p&gt;
{% endif %}</code><h3>حق دسترسی ها، گروه ها و پیام ها</h3><p>چند قسمت دیگر از فریم ورک authentication وجود دارد که تنها به طور روزنامه وار از کنار آن عبور کردیم. در ادامه نگاهی نزدیک تر به آن ها خواهیم داشت.</p><h4>حق دسترسی ها</h4><p>حق دسترسی ها روشی ساده برای "علامت گذاری" کاربران و گروه ها جهت نشان دادن این که کاربر یا گروه علامت گذاری شده دارای توانایی اجرای برخی کارها می باشد. حق دسترسی ها معمولا توسط سایت مدیر جنگو استفاده شده اند، ولی می توان به سادگی در کد خود نیز از آن ها استفاده کرد.</p><p>سایت مدیر جنگو به صورتی که در زیر بیان شده است از حق دسترسی ها استفاده کرده است:</p><ul><li>دسترسی به view فرم "add"، و اضافه کردن یک شیء که محدود به کاربران با حق دسترسی add برای آن نوع از شیء.</li><li>دسترسی به view لیست تغییر، view فرم "change"، و تغییر یک شیء که به کاربران با حق دسترسی change برای آن نوع شیء محدود شده است.</li><li>دسترسی به حذف یک شیء محدود شده به کاربران با حق دسترسی delete برای آن نوع از شیء.</li></ul><p>حق دسترسی ها به صورت globally برای هر نوع از آجکت، نه هر نمونه ی خاص از شیء قرار داده شده اند. برای مثال، می توان گفت "Mary قادر است اخبار را تغییر دهد" ولی حق دسترسی ها اجازه نمی دهد که به عنوان مثال بگویید "Mary قادر است اخبار تغییر دهید، ولی تنها آنهایی را که خود او ساخته است" یا "Mary قادر است تنها اخباری را تغییر دهید که دارای یک وضعیت خاصی، انتشار یا ID خاص باشد."</p><p>این ها سه حق دسترسی اساسی می باشد – اضافه کردن، تغییر دادن، و حذف کردن – که به طور خودکار برای هر مدل جنگو ایجاد شده اند. در پشت صحنه، این حق دسترسی ها هنگامی که شما دستور manage.py sycdb را اجرا می کنید درون جدول پایگاه داده با نام auth_permission اضافه می شوند.</p><p>این حق دسترسی ها فرمی از "<app>.<action>_<object_name>" می باشند. بدین معنی که اگر دارای یک برنامه ی polls (نظرسنجی) با یک مدل Choice می باشید، حق دسترسی های <bdo class="leftInline">"polls.add_choice"</bdo>، <bdo class="leftInline">"polls.change_choice"</bdo> و "polls.delete_choice" را بدست خواهید آورد.</object_name></action></app></p><p>درست مثل کاربران، حق دسترسی ها در یک مدل جنگو موجود در django.contrib.auth.models اجرا شده اند. این یعنی این که می توان در صورت تمایل ارتباط با permission ها، به طور مستقیم از API پایگاه داده ی جنگو استفاده کرد.</p><h4>گروه ها</h4><p>گروه ها یک view جنریک از طبقه بندی کاربران می باشد، بنابراین می توان حق دسترسی ها، یا برخی چیزهای دگر را برای آن کاربران بکار برد. یک کاربر می تواند به هر تعدادی از گروه ها تعلق داشته باشد.</p><p>یک کاربر در یک گروه به طور خودکار دارای حق دسترسی های داده به آن گروه می باشد. برای مثال، در صورتی که گروه Site editors دارای حق دسترسی can_edit_home_page باشد، هر کاربر در آن گروه آن حق دسترسی را خواهد داشت.</p><p>گروه ها همچنین روش مناسبی برای طبقه بندی کاربران برای دادن برخی لیبل ها یا قابلیت تمدید به آن ها می باشد. برای مثال، می توان یک گروه با نام 'Special users' ایجاد نمود، و آن قبیل از کاربرانی را که می خواهیم در یک بخش از سایت که تنها برای دسترسی کاربران در نظر گرفته شده است فعالیت کنند را در آن قرار دهیم، یا پیام هایی که تنها برای کاربران در نظر گرفته ایم را به آن ها ارسال کنیم.</p><p>همانند کاربران، ساده ترین روش برای مدیریت گروه ها، از طریق رابط مدیر می باشد. هر چند، گروه ها نیز تنها مدل های جنگو می باشند که در django.contrib.auth.models وجود دارند. بنابراین شما می توانید همواره برای سرو کار داشتن با گروه ها در سطح پایین از API پایگاه داده ی جنگو استفاده کنید.</p><h4>پیام ها</h4><p>سیستم پیام یک روش سبک جهت به صف کردن پیام برای کاربران داده شده می باشد. یک پیام، مرتبط با یک User می باشد. هیچ مفهومی از انقضا یا برچسب زمانی وجودد ندارد.</p><p>پیام ها توسط رابط مدیر جنگو بعد از اعمال موفقیت آمیز استفاده می شوند. زمانی که شما یک آجکت ایجاد می کند، متوجه ی یک پیام "The object was created successfully" در بالای صفحه ی مدیر خواهید شد.</p><p>می توانید از یک API هم شکل برای صف بندی و نمایش پیام ها در برنامه ی خودتان استفاده کنید. API ساده می باشد:</p><ul><li>جهت ایجاد یک پیام جدید، از <bdo class="leftInline">user.message_set.create(message='message_text')</bdo> استفاده کنید.</li><li>جهت بازیابی/حدف پیام ها، از <bdo class="leftInline">user.get_and_delete_messages()</bdo> استفاده کنید، که یک لیست از شیء های Message در صف کاربران (در صورت وجود) بر می گرداند و پیام های از صف را حذف می کند.</li></ul><p>در مثال view زیر، سیستم یک پیام برای کاربر بعد از ساختن یک playlist ذخیره می کند:</p><code class="language-python">def create_playlist(request, songs):
    # Create the playlist with the given songs.
    # ...
    request.user.message_set.create(
        message="Your playlist was added successfully."
    )
    return render_to_response("playlists/create.html",
        context_instance=RequestContext(request))</code><p>هنگامی که شما از RequestContext استفاده می کند، کاربر وارد شده ی فعلی و پیام او در template context به صورت متغیر <bdo class="leftInline">template {{ message }}</bdo> در دسترس هستند. در زیر یک مثال از کد template وجود دارد که پیام ها را نمایش می دهد:</p><code class="language-django">{% if messages %}
&lt;ul&gt;
    {% for message in messages %}
    &lt;li&gt;{{ message }}&lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
{% endif %}</code><p>دقت داشته باشید که RequestContext در پشت صحنه get_and_delete_messages را فراخوانی می کند، بنابراین هر پیامی حذف شده خواهد بود حتی اگر آن ها را نمایش ندهید.</p><p>در پایان، دقت داشته باشید که این فریم ورک پیام ها تنها با کاربران در پایگاه داده ی کاربر کار می کنند. برای ارسال پیام ها به کاربران anonymous، از چارچوب session به طور مستقیم استفاده کنید.</p></div></main>
<nav class="gradient">
    <div class="titr-link">کتاب های آموزشی</div>
<a title="زبان جاوا" class="anav" href="https://oruji.github.io/java/">زبان جاوا</a><a title="زبان پایتون" class="anav" href="https://oruji.github.io/python/">زبان پایتون</a><a title="فریم ورک جنگو" class="anav" href="https://oruji.github.io/django/">فریمورک جنگو</a><a title="سیستم عامل لینوکس" class="anav" href="https://oruji.github.io/linux/">سیستم عامل لینوکس</a><a title="مطالب CSS" class="anav last-line" href="https://oruji.github.io/css/">مطالب CSS</a><div class="titr-link">کتاب آموزش جنگو</div>
<a href="https://oruji.github.io/django/introduction/" class="anav" title="مقدمه">مقدمه</a><a href="https://oruji.github.io/django/start/" class="anav" title="شروع کار">شروع کار</a><a href="https://oruji.github.io/django/view/urlconf/" class="anav" title="view ها و URLconf ها">view ها و URLconf ها</a><a href="https://oruji.github.io/django/template/" class="anav" title="Template ها">Template ها</a><a href="https://oruji.github.io/django/model/" class="anav" title="مدل ها">مدل ها</a><a href="https://oruji.github.io/django/admin-site/" class="anav" title="سایت مدیر">سایت مدیر</a><a href="https://oruji.github.io/django/form/" class="anav" title="فرم ها">فرم ها</a><a href="https://oruji.github.io/django/view/urlconf/advance/" class="anav" title="View ها و URLconf های پیشرفته">View ها و URLconf های پیشرفته</a><a href="https://oruji.github.io/django/template/advance/" class="anav" title="Template های پیشرفته">Template های پیشرفته</a><a href="https://oruji.github.io/django/model/advance/" class="anav" title="مدل های پیشرفته">مدل های پیشرفته</a><a href="https://oruji.github.io/django/view/generic/" class="anav" title="View های Generic">View های Generic</a><a href="https://oruji.github.io/django/non-html/" class="anav" title="تولید محتوای غیر html ای">تولید محتوای غیر html ای</a><div  class="divnav" title="Session ها، کاربران، و عضویت">Session ها، کاربران، و عضویت</div><a href="https://oruji.github.io/django/caching/" class="anav" title="مبحث Caching">مبحث Caching</a><a href="https://oruji.github.io/django/package/contrib/" class="anav" title="پکیج django.contrib">پکیج django.contrib</a><a href="https://oruji.github.io/django/middleware/" class="anav" title="مبحث Middleware">مبحث Middleware</a><a href="https://oruji.github.io/django/database/integrate/legacy/" class="anav" title="یکپارچه سازی برنامه ها و دیتابیس های Legacy">یکپارچه سازی برنامه ها و دیتابیس های Legacy</a><a href="https://oruji.github.io/django/internationalize/" class="anav" title="بین المللی سازی">بین المللی سازی</a><a href="https://oruji.github.io/django/security/" class="anav" title="امنیت">امنیت</a></nav>
<footer class="gradient">Copyright © 2020 - <a href="https://oruji.github.io/" title="آموزش آنلاین">oruji.github.io</a></footer></body>

</html>