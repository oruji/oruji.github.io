<!DOCTYPE html>
<html dir="rtl" lang="fa">


<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-43783552-5"></script>
<script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config','UA-43783552-5');</script>
<link rel="canonical" href="https://oruji.github.io/java/csv/read/" />
<link rel="shortcut icon" href="https://oruji.github.io/static/img/favicon.ico" />
<title>نحوه خواندن پردازش parse فایل CSV در جاوا کتاب آموزش برخط</title>
<meta name="description" content="در این آموزش از کتاب برخط جاوا، نحوه و چگونگی خواندن، پردازش و parse فایل های CSV را مرور خواهیم کرد. CSV مخفف Comma-Separated-Values می باشد و یک فایل معمولی" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index, follow" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="fontiran.com:license" content="ZM3QX" />
<meta name="msvalidate.01" content="338AFFB8975A4C65F4A4BC10CDAFF254" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@oruji" />
<meta name="twitter:creator" content="@oruji" />
<meta name="twitter:title" content="نحوه خواندن پردازش parse فایل CSV در جاوا کتاب آموزش برخط">
<meta name="twitter:description" content="در این آموزش از کتاب برخط جاوا، نحوه و چگونگی خواندن، پردازش و parse فایل های CSV را مرور خواهیم کرد. CSV مخفف Comma-Separated-Values می باشد و یک فایل معمولی">
<meta name="twitter:image" content="https://oruji.github.io/java/csv/read/logo.png" />
<meta property="og:title" content="نحوه خواندن پردازش parse فایل CSV در جاوا کتاب آموزش برخط" />
<meta property="og:description" content="در این آموزش از کتاب برخط جاوا، نحوه و چگونگی خواندن، پردازش و parse فایل های CSV را مرور خواهیم کرد. CSV مخفف Comma-Separated-Values می باشد و یک فایل معمولی" />
<meta property="og:url" content="https://oruji.github.io/java/csv/read/" />
<meta property="og:type" content="article" />
<meta property="og:image" content="https://oruji.github.io/java/csv/read/logo.png" />
<script src="https://oruji.github.io/static/js/main.js"></script>
<style>
.token.bold,.token.important,.token.string{font-weight:700}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:20px;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#e7eeff}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.doctype,.token.prolog{color:#708090}.token.comment{color:#008a32}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.symbol{color:#000}.token.attr-name,.token.char,.token.inserted,.token.selector{color:#690}.token.builtin{color:#000}.token.string{color:#0f69ff}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#a67f59}.token.operator{color:#692d02}.token.atrule,.token.attr-value,.token.keyword{color:maroon;font-weight:700}.token.function{color:#000}.token.important,.token.regex{color:#e90}.token.variable{color:#b98118}.token.italic{font-style:italic}.token.entity{cursor:help}
</style>
<script src="https://oruji.github.io/static/js/prism.js"></script>
<style>
textarea, input, button, select { font-family: inherit; font-size: inherit;} p, li { text-align: justify;} main, nav { width: 100%;} .leftBlock, .leftInline, .logout, pre, canvas { direction: ltr;} .note td, pre { word-wrap: break-word;} body, main, div, footer, h1, h2, h3, h4, h5, h6, header, nav, input, button { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin: 0; padding: 0 } body { font-family: IRANSans; background-color: #fff; font-size: 1em; line-height: 35px;} nav { font-size: 0.83em; padding: 14px; float: right; margin-bottom: 2px;} header { color: #fff; margin: 2px; min-height: 86px; padding: 13px;} footer { font-size: 0.83em; text-align: center; padding: 30px; clear: both; color: #fff; margin: 2px;} pre { text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.86em; background-color: #e7eeff; padding: 8px 10px 8px 8px; color: #000; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; line-height: 20px; border-radius: 5px } code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} .code { direction: ltr; text-align: left; font-family: consolas, "Courier New", Courier, mono, serif; font-size: 0.92em; background-color: #e7eeff; padding: 10px !important; margin: 10px !important; color: #000; white-space: pre !important; white-space: -moz-pre-wrap !important; white-space: -pre-wrap !important; white-space: -o-pre-wrap !important; line-height: 20px; border-radius: 5px; display: block; overflow: auto; word-wrap: break-word;} h1, h2, h3, h4, h5, h6 { font-weight: 500 !important } button { padding: 4px; border-radius: 5px;} .titr-link { text-align: center; font-weight: 700;} h1 { margin-bottom: 20px; margin-top: 20px; font-size: 1.5em;} h2 { font-size: 1.33em;} h3 { font-size: 1.17em;} h4 { font-size: 1.08em;} h5 { font-size: 1em;} textarea { height: 150px; font-size: inherit; line-height: 20px; width: 98%;} main { border-radius: 7px; background-color: #fff; padding-top: 15px; padding-bottom: 15px; padding-right: 20px; padding-left: 20px; min-height: 500px; box-shadow: 0 0 3px 1px #e0d9ff; float: right;} .logout { height: 40px; border-radius: 5px; color: #fff; margin: -5px 2px 2px; direction: ltr; padding-right: 10px; float: left;} .myClean { padding: 0; margin: 0;} .myscroll { display: block; overflow-x: auto } li { padding: 5px } .gradient { border-radius: 7px; background: linear-gradient(#001F38, #37627a); background: -moz-linear-gradient(#001F38, #37627a); background: -webkit-linear-gradient(#001F38, #37627a); background: -ms-linear-gradient(#001F38, #37627a); background: -o-linear-gradient(#001F38, #37627a) } .puzzle { white-space: nowrap;} a { color: #add8e6;} a.content { color: #4164ca;} .last-line, .titr-link { margin-bottom: 10px;} .titr-link { background-color: #e8eeff; border-radius: 5px;} .index, .index-style { border-radius: 4px; padding: 20px; display: block;} .index:hover { color: #add8e6; background-color: #366179;} .index-style { background-color: #e7eeff;} .index-style:hover { color: #add8e6; background-color: #366179;} .myTitle { margin-bottom: -10px } .anav, .anav:hover, .divnav { padding: 4px; display: block;} .divnav { color: #e7eeff; background-color: #366179; border-radius: 3px;} .anav { color: #add8e6;} .anav:hover { background-color: #3e6c8a; border-radius: 3px;} .myError { margin-bottom: 10px; margin-top: 5px; color: red;} .alogo { padding: 10.5px; float: right; color: #000; text-align: center; width: 150px;} .alogo:hover { padding: 10px; border-style: solid; border-radius: 10px; border-width: .5px;} .puzzle, ol, p, li { display: block; overflow-x: auto;} .leftBlock { text-align: left;} .radius5 { border-radius: 5px;} hr { margin-bottom: 15px; margin-top: 0;} .change-lang { margin-top: 5px; background-color: #e8eeff; color: #000; padding-right: 10px; padding-left: 10px; border-radius: 3px; line-height: 29px; text-align: center; height: 26px; display: block; padding-bottom: 5px;} .note { margin: 1em 0; width: 100%; overflow: hidden; background: #FFF; border-radius: 10px; border: 1px solid #167F92 } .note tr { border: 1px solid #D9E4E6 } .note tr:nth-child(odd) { background-color: #e0e0e0 } .note th { border: 1px solid #FFF; background-color: #167F92; color: #FFF } .note th:first-child { display: table-cell; text-align: center } .note th:nth-child(2) { display: table-cell } .note th:nth-child(2) span { display: block } .note th:nth-child(2):after { display: none } .note td { max-width: 7em; border: 1px solid #D9E4E6 } .note td:first-child { display: table-cell; text-align: center; border-right: 1px solid #D9E4E6 } .note td, .note th { display: table-cell; padding: 1em } a, ul.social-icons li a:hover { text-decoration: none } ul.social-icons { padding: 0; width: auto; overflow: initial; margin-top: 0; margin-bottom: 0; float: left;} ul.social-icons li { background-image: url(https://oruji.github.io/static/img/social-sprites.svg); background-repeat: no-repeat; background-color: #FFF; background-position: 0 100px; display: inline-block; margin: -1px 1px 5px 0; padding: 0; border-radius: 100%; overflow: visible; transition: all .3s ease; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .42); -moz-border-radius: 100%; -moz-transition: all .3s ease; -ms-transition: all .3s ease; -o-transition: all .3s ease; -webkit-border-radius: 100%; -webkit-transition: all .3s ease; border: 1.5px solid #12354d; margin-left: 3px; margin-right: 3px;} ul.social-icons li a { display: block; height: 28px; width: 28px; text-align: center } ul.social-icons li[class] a { text-indent: -9999px } ul.social-icons li a i[class^=icon-] { color: #444; font-style: 16px; position: relative; top: 3px } ul.social-icons li a:active { box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -moz-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3); -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, .3), inset 0 0 10pxrgba(0, 0, 0, .3) } ul.social-icons li a:active, ul.social-icons li:active { border-radius: 100%; -moz-border-radius: 100%; -webkit-border-radius: 100% } ul.social-icons li.facebook { background-position: 0 -001px } ul.social-icons li.facebook:hover { background-position: 0 -031px } ul.social-icons li.github { background-position: 0 -061px } ul.social-icons li.github:hover { background-position: 0 -091px } ul.social-icons li.rss { background-position: 0 -121px } ul.social-icons li.rss:hover { background-position: 0 -151px } ul.social-icons li.twitter { background-position: 0 -181px } ul.social-icons li.twitter:hover { background-position: 0 -211px } ul.social-icons li.googleplus { background-position: 0 -301px } ul.social-icons li.googleplus:hover { background-position: 0 -331px } ul.social-icons li.linkedin { background-position: 0 -241px } ul.social-icons li.linkedin:hover { background-position: 0 -271px } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 900; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Black.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Black.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Black.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Black.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 700; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Bold.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Bold.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Bold.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Bold.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 500; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Medium.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Medium.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Medium.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Medium.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 300; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_Light.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_Light.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_Light.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_Light.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 200; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb_UltraLight.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb_UltraLight.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb_UltraLight.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb_UltraLight.ttf) format('truetype') } @font-face { font-display: swap; font-family: IRANSans; font-style: normal; font-weight: 400; src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot); src: url(https://oruji.github.io/static/font/eot/IRANSansWeb.eot?#iefix) format('embedded-opentype'), url(https://oruji.github.io/static/font/woff2/IRANSansWeb.woff2) format('woff2'), url(https://oruji.github.io/static/font/woff/IRANSansWeb.woff) format('woff'), url(https://oruji.github.io/static/font/ttf/IRANSansWeb.ttf) format('truetype') } .emph { color: #c7254e; background-color: #ffd7e3; border-radius: 4px; font-weight:bold;} .emphG { color: #2e9821; background-color: #e6f9d8; border-radius: 4px; font-weight: bold;} .search-form { text-align: center; padding-top:0; padding-bottom:10px; background-color: white; border-radius: 10px;} .search-input { width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px;} .search-btn { cursor: pointer; width: 100%; padding: 10px 20px 10px 20px; margin-top: 0; margin-bottom: 5px; border-radius: 5px; background-color: #366179; color: white;} a.alogo img { width: 120px;} img { max-width: 700px;} a.alogo h2 { font-size:0.87em;} .wide { margin-top: -12px; padding: 15px; float: right; margin-right: -15px;} .widetext { color: white; font-family: High Tower Text; font-weight: 600; font-size: 1.56em; margin-right: -10px; float: right; margin-top: -2px;} .widespan { display: block; font-size: 48%; font-weight: normal; margin-top: -11px; margin-right: 5px;} .logo { float: right; padding: 20px; width: 120px;} .fehrest { clear: both; margin-bottom: 20px; margin-top: 20px;} .plogo { overflow-x: initial;} .yaddasht { float: right; margin-left: 15px; width: 40px; height: 40px;} .imgCenter { display: block; margin: auto; border-radius: 2px;} .up { font-size: 0.83em; background-color: #f5f5f5; padding-right: 20px; padding-left: 20px; border-radius: 5px;} #navContent { display: none;} #uploadForm { float: left; color: grey;} @media only screen and (min-width:768px) { nav { width: 25%;} main { width: 75%;} .search-input { width: 400px;} .search-btn { width: 100px;} .search-form { padding-top: 30px; padding-bottom: 30px; background-color: #93abc3;}} @media only screen and (max-width:466px) { header { min-height: 114px }} .myClear { clear:both;} .mar0{margin:0} .mart-3{margin-top:-3px;} .mart10{margin-top:10px;} .marb10{margin-bottom:10px;} .padr20{padding-right:20px} .floatL{float:left} .floatR{float:right} .myPhone { float: left; direction: ltr; font-weight: bold; font-size: 0.87em; margin-left: 5px; font-style: italic; background: #e8eeff; color: black; border-radius: 5px; padding-right: 7px; height: 26px; padding-top: 1px;} .fontSize { display: inline; float: left; direction: ltr; font-weight:bold;} .increaseFont{ font-size: 1.06em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .decreaseFont{ font-size: 0.81em; padding-right: 8px; padding-left: 8px; cursor:pointer;} .myHide { display:none;}</style>
</head>
<body>
<noscript>Your browser does not support JavaScript!</noscript>
<header class="gradient">
<a href="https://oruji.github.io/" title="oruji.github.io">
<img alt="oruji.github.io" src="https://oruji.github.io/static/img/wide.svg" class="wide">
<div class="widetext">oruji.github.io<span class="widespan">Persian Tutorials</span></div>        </a>
<ul class="social-icons"><li class="github"><a href="https://github.com/oruji" target="_blank" data-placement="bottom" title=" Github">Github</a></li><li class="twitter"><a href="https://twitter.com/oruji" target="_blank" data-placement="bottom" title=" Twitter">Twitter</a></li><li class="linkedin"><a href="https://www.linkedin.com/in/oruji/" target="_blank" data-placement="bottom" title=" Linkedin">Linkedin</a></li><li class="rss"><a href="https://oruji.github.io/feed.xml" target="_blank" data-placement="bottom" title="RSS Feed">rss</a></li></ul>
</header>
<main>
<div class="up">
ویرایش: <span dir=ltr>1396/11/14 22:22</span><div title="تغییر اندازه فونت" class="fontSize">
<span onclick="increaseFont()" class="increaseFont">A</span>
<span onclick="decreaseFont()" class="decreaseFont">A</span>
</div></div>
<div class="center"><h1>نحوه خواندن و پردازش (parse) فایل CSV در جاوا</h1><p>در این آموزش از <strong>کتاب برخط</strong> جاوا، نحوه و چگونگی خواندن و parse فایل های <strong>CSV</strong> را مرور خواهیم کرد. CSV مخفف Comma-Separated-Values می باشد و یک فایل معمولی متنی است، که داده ها در آن به صورت ستون به ستون ذخیره شده و توسط یک جدا کننده (به طور معمول کاما ",") از هم جدا می شوند.</p><p>نمونه محتوی CSV</p><code class="language-">1,US,United States
2,MY,Malaysia
3,AU,Australia</code><p>یا</p><code class="language-">"1","US","United States"
"2","MY","Malaysia"
"3","AU","Australia"</code><h4>نکته</h4><p>در یک فایل CSV، به طور معمول دو مشکل وجود دارد:</p><li>مورد اول اینکه درون مقادیر جدا شده با کاما، خود کاراکتر کاما نیز وجود داشته باشد:</li><code class="language-">"aaa","b,bb","ccc"</code><li>دوم اینکه فیلدها هرکدام درون دابل کتیشن باشند، درون خود فیلد نیز کاراکتر دابل کتیشن وجود داشته باشد. در این مورد باید قبل از کاراکتر کتیشن یک کتیشن دیگر نیز قرار داد.</li><code class="language-">"aaa","b""bb","ccc"</code><p>در این <strong>آموزش</strong>، ما سه مثال برای خواندن، پردازش (parse) و چاپ مقادیر فایل CSV در <strong>جاوا</strong> را نشان خواهیم داد.</p><ol><li>راهکار ساده برای پردازش و parse یک فایل CSV با قالب بندی ساده.</li><li>راهکار پیشرفته برای پردازش و parse فایل CSV با قالب بندی پیچیده (فیلد های دارای کاما یا دابل کتیشن).</li><li>راهکار Thirtd Party، مثال OpenCSV.</li></ol><h2>1. راهکار ساده</h2><p>در صورتیکه مطمئن هستید فایل های CSV شما حاوی کاما و دابل کتیشن نمی باشند، تنها کافی است از <bdo class="leftInline">split()</bdo> برای پردازش و parse فایل CSV استفاده کنید.</p><p>1.1 فایل ساده CSV</p><code class="language-">"1.0.0.0","1.0.0.255","16777216","16777471","AU","Australia"
"1.0.1.0","1.0.3.255","16777472","16778239","CN","China"
"1.0.4.0","1.0.7.255","16778240","16779263","AU","Australia"
"1.0.8.0","1.0.15.255","16779264","16781311","CN","China"
"1.0.16.0","1.0.31.255","16781312","16785407","JP","Japan"
"1.0.32.0","1.0.63.255","16785408","16793599","CN","China"
"1.0.64.0","1.0.127.255","16793600","16809983","JP","Japan"
"1.0.128.0","1.0.255.255","16809984","16842751","TH","Thailand"</code><p>1.2 هیچ جادویی وجود ندارد، تنها فایل متنی بالا را خوانده، و با جدا کننده کاما جدا می کنیم:</p><code class="language-java">package org.amoozesh.csv;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class CSVReader {
    public static void main(String[] args) {
        String csvFile = "/Users/oruji/csv/country.csv";
        BufferedReader br = null;
        String line = "";
        String cvsSplitBy = ",";

        try {
            br = new BufferedReader(new FileReader(csvFile));
            while ((line = br.readLine()) != null) {

                // use comma as separator
                String[] country = line.split(cvsSplitBy);

                System.out.println("Country [code= " + country[4] + " , name=" + country[5] + "]");

            }

        } catch (FileNotFoundException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        } finally {
            if (br != null) {
                try {
                    br.close();

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}</code><p>1.3 برای JDK 7 و نسخه های بالاتر، از try-resources استفاده کنید.</p><code class="language-java">package org.amoozesh.csv;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class CSVReader {
    public static void main(String[] args) {
        String csvFile = "/Users/oruji/csv/country.csv";
        String line = "";
        String cvsSplitBy = ",";

        try (BufferedReader br = new BufferedReader(new FileReader(csvFile))) {

            while ((line = br.readLine()) != null) {

                // use comma as separator
                String[] country = line.split(cvsSplitBy);

                System.out.println("Country [code= " + country[4] + " , name=" + country[5] + "]");
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code><p>خروجی</p><code class="language-">Country [code= "AU" , name="Australia"]
Country [code= "CN" , name="China"]
Country [code= "AU" , name="Australia"]
Country [code= "CN" , name="China"]
Country [code= "JP" , name="Japan"]
Country [code= "CN" , name="China"]
Country [code= "JP" , name="Japan"]
Country [code= "TH" , name="Thailand"]</code><h3>2. راهکار پیشرفته</h3><p>این راهکار مشکل وجود کاراکتر کاما و دابل کتیشن درون فیلدها را حل می کند، و همچنین جدا کننده های سفارشی (به غیر از کاما) را نیز پشتیبانی می کند. مثال پردازش CSV زیر و تست case های Junit آن را بر درک بیشتر مرور کنید.</p><h4>نکته</h4><p>دوباره تکرار می کنیم، در صورتیکه کاراکتر دابل کتیشن (") درون یک فیلد بود، شما باید یک کتیشن دیگر قبل از آن قرار دهید:</p><code class="language-">"aaa","b""bb","ccc"</code><p>2.1 فایل CSV دیگری را در زیر وجود دارد</p><code class="language-">10,AU,Australia
11,AU,Aus""tralia
"12","AU","Australia"
"13","AU","Aus""tralia"
"14","AU","Aus,tralia"</code><p>2.2 پردازش فایل فوق</p><code class="language-java">package org.amoozesh.utils;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class CSVUtils {
    private static final char DEFAULT_SEPARATOR = ',';
    private static final char DEFAULT_QUOTE = '"';

    public static void main(String[] args) throws Exception {
        String csvFile = "/Users/oruji/csv/country2.csv";

        Scanner scanner = new Scanner(new File(csvFile));
        while (scanner.hasNext()) {
            List<string> line = parseLine(scanner.nextLine());
            System.out.println("Country [id= " + line.get(0) + ", code= " + line.get(1) + " , name=" + line.get(2) + "]");
        }
        scanner.close();

    }

    public static List<string> parseLine(String cvsLine) {
        return parseLine(cvsLine, DEFAULT_SEPARATOR, DEFAULT_QUOTE);
    }

    public static List<string> parseLine(String cvsLine, char separators) {
        return parseLine(cvsLine, separators, DEFAULT_QUOTE);
    }

    public static List<string> parseLine(String cvsLine, char separators, char customQuote) {

        List<string> result = new ArrayList&lt;&gt;();

        //if empty, return!
        if (cvsLine == null &amp;&amp; cvsLine.isEmpty()) {
            return result;
        }

        if (customQuote == ' ') {
            customQuote = DEFAULT_QUOTE;
        }

        if (separators == ' ') {
            separators = DEFAULT_SEPARATOR;
        }

        StringBuffer curVal = new StringBuffer();
        boolean inQuotes = false;
        boolean startCollectChar = false;
        boolean doubleQuotesInColumn = false;

        char[] chars = cvsLine.toCharArray();

        for (char ch : chars) {

            if (inQuotes) {
                startCollectChar = true;
                if (ch == customQuote) {
                    inQuotes = false;
                    doubleQuotesInColumn = false;

                } else {
                    //Fixed : allow "" in custom quote enclosed
                    if (ch == '\"') {
                        if (!doubleQuotesInColumn) {
                            curVal.append(ch);
                            doubleQuotesInColumn = true;
                        }
                    } else {
                        curVal.append(ch);
                    }
                }
            } else {
                if (ch == customQuote) {
                    inQuotes = true;

                    //Fixed : allow "" in empty quote enclosed
                    if (chars[0] != '"' &amp;&amp; customQuote == '\"') {
                        curVal.append('"');
                    }

                    //double quotes in column will hit this!
                    if (startCollectChar) {
                        curVal.append('"');
                    }

                } else if (ch == separators) {
                    result.add(curVal.toString());

                    curVal = new StringBuffer();
                    startCollectChar = false;

                } else if (ch == '\r') {
                    //ignore LF characters
                    continue;

                } else if (ch == '\n') {
                    //the end, break!
                    break;

                } else {
                    curVal.append(ch);
                }
            }
        }

        result.add(curVal.toString());

        return result;
    }
}</string></string></string></string></string></code><p>خروجی</p><code class="language-">Country [id= 10, code= AU , name=Australia]
Country [id= 11, code= AU , name=Aus"tralia]
Country [id= 12, code= AU , name=Australia]
Country [id= 13, code= AU , name=Aus"tralia]
Country [id= 14, code= AU , name=Aus,tralia]</code><p>3.3 unit test زیر را مرور کنید، این مثال مشکل کاما و دابل کتیشن را تست میکند:</p><code class="language-java">package org.amoozesh.csv;

import org.amoozesh.utils.CSVUtils;
import org.hamcrest.core.IsNull;
import org.junit.Test;

import java.util.List;

import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.core.Is.is;

public class CSVUtilsTest {
    @Test
    public void test_no_quote() {

        String line = "10,AU,Australia";
        List<string> result = CSVUtils.parseLine(line);

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Australia"));
    }

    @Test
    public void test_no_quote_but_double_quotes_in_column() throws Exception {
        String line = "10,AU,Aus\"\"tralia";

        List<string> result = CSVUtils.parseLine(line);
        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Aus\"tralia"));
    }

    @Test
    public void test_double_quotes() {
        String line = "\"10\",\"AU\",\"Australia\"";
        List<string> result = CSVUtils.parseLine(line);

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Australia"));
    }

    @Test
    public void test_double_quotes_but_double_quotes_in_column() {
        String line = "\"10\",\"AU\",\"Aus\"\"tralia\"";
        List<string> result = CSVUtils.parseLine(line);

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Aus\"tralia"));
    }

    @Test
    public void test_double_quotes_but_comma_in_column() {
        String line = "\"10\",\"AU\",\"Aus,tralia\"";
        List<string> result = CSVUtils.parseLine(line);

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Aus,tralia"));
    }
}</string></string></string></string></string></code><p>3.4 unit test دیگری را که در زیر آمده است مرور کنید، این مثال جدا کننده و دابل کتیشن سفارشی را تست می کند.</p><code class="language-java">package org.amoozesh.csv;

import org.amoozesh.utils.CSVUtils;
import org.hamcrest.core.IsNull;
import org.junit.Test;

import java.util.List;

import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.core.Is.is;

public class CSVUtilsTestCustom {
    @Test
    public void test_custom_separator() {
        String line = "10|AU|Australia";
        List<string> result = CSVUtils.parseLine(line, '|');

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Australia"));
    }

    @Test
    public void test_custom_separator_and_quote() {
        String line = "'10'|'AU'|'Australia'";
        List<string> result = CSVUtils.parseLine(line, '|', '\'');

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Australia"));
    }

    @Test
    public void test_custom_separator_and_quote_but_custom_quote_in_column() {
        String line = "'10'|'AU'|'Aus|tralia'";
        List<string> result = CSVUtils.parseLine(line, '|', '\'');

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Aus|tralia"));
    }

    @Test
    public void test_custom_separator_and_quote_but_double_quotes_in_column() {
        String line = "'10'|'AU'|'Aus\"\"tralia'";
        List<string> result = CSVUtils.parseLine(line, '|', '\'');

        assertThat(result, IsNull.notNullValue());
        assertThat(result.size(), is(3));
        assertThat(result.get(0), is("10"));
        assertThat(result.get(1), is("AU"));
        assertThat(result.get(2), is("Aus\"tralia"));
    }
}</string></string></string></string></code><h3>مثال OpenCSV</h3><p>در صورتیکه با مثال های فوق راحت نیستید، از کتابخانه هایی مانند OpenCSV می توانید استفاده کنید.</p><p>3.1 Maven</p><code class="language-xml">&lt;dependency&gt;
	&lt;groupId&gt;com.opencsv&lt;/groupId&gt;
	&lt;artifactId&gt;opencsv&lt;/artifactId&gt;
	&lt;version&gt;3.8&lt;/version&gt;
&lt;/dependency&gt;</code><p>3.2 فایل CSV</p><code class="language-">10,AU,Australia
11,AU,Aus""tralia
"12","AU","Australia"
"13","AU","Aus""tralia"
"14","AU","Aus,tralia"</code><p>3.2 مثال OpenCSV برای پردازش و parse فایل CSV بالا</p><code class="language-java">package org.amoozesh.csv;

import com.opencsv.CSVReader;

import java.io.FileReader;
import java.io.IOException;

public class CSVReaderExample {
    public static void main(String[] args) {
        String csvFile = "/Users/oruji/csv/country3.csv";

        CSVReader reader = null;
        try {
            reader = new CSVReader(new FileReader(csvFile));
            String[] line;
            while ((line = reader.readNext()) != null) {
                System.out.println("Country [id= " + line[0] + ", code= " + line[1] + " , name=" + line[2] + "]");
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code><p>خروجی</p><code class="language-">Country [id= 10, code= AU , name=Australia]
Country [id= 11, code= AU , name=Aus"tralia]
Country [id= 12, code= AU , name=Australia]
Country [id= 13, code= AU , name=Aus"tralia]
Country [id= 14, code= AU , name=Aus,tralia]</code><h4>منابع</h4><ol><li><a title="The Only Class You Need for CSV Files" class="content" href="https://agiletribe.wordpress.com/2012/11/23/the-only-class-you-need-for-csv-files/">The Only Class You Need for CSV Files</a></li></ol></div></main>
<nav class="gradient">
    <div class="titr-link">کتاب های آموزشی</div>
<a title="زبان جاوا" class="anav" href="https://oruji.github.io/java/">زبان جاوا</a><a title="زبان پایتون" class="anav" href="https://oruji.github.io/python/">زبان پایتون</a><a title="فریم ورک جنگو" class="anav" href="https://oruji.github.io/django/">فریمورک جنگو</a><a title="سیستم عامل لینوکس" class="anav" href="https://oruji.github.io/linux/">سیستم عامل لینوکس</a><a title="مطالب CSS" class="anav last-line" href="https://oruji.github.io/css/">مطالب CSS</a><div class="titr-link">کتاب آموزش جاوا</div>
<a title="مرتب (Sort) کردن شیء با Comparable و Comparator" class="anav" href="https://oruji.github.io/java/sort/">مرتب (Sort) کردن شیء با Comparable و Comparator</a><a title="تبدیل Map به لیست (List)" class="anav" href="https://oruji.github.io/java/map/convert/list/">تبدیل Map به لیست (List)</a><div title="نحوه خواندن و پردازش (parse) فایل CSV" class="divnav" >نحوه خواندن و پردازش (parse) فایل CSV</div><a class="anav" href="https://oruji.github.io/java/immutable/mutable/" title="تفاوت mutable و immutable">تفاوت Mutable و Immutable</a><a class="anav" href="https://oruji.github.io/java/foreach/" title="foreach 8">foreach 8</a><a class="anav" href="https://oruji.github.io/java/print/pyramid/" title="چاپ هرم">چاپ هرم</a><a class="anav" href="https://oruji.github.io/java/date/current/" title="بدست آوردن زمان و تاریخ فعلی">بدست آوردن زمان و تاریخ فعلی</a><a class="anav" href="https://oruji.github.io/java/disk-space/" title="بدست آوردن فضای خالی دیسک">بدست آوردن فضای خالی دیسک</a><a class="anav" href="https://oruji.github.io/java/string/convert/int/" title="تبدیل رشته به int">تبدیل رشته به int</a><a class="anav" href="https://oruji.github.io/java/int/convert/string/" title="تبدیل int به رشته">تبدیل int به رشته</a><a href="https://oruji.github.io/java/string/convert/char/" class="anav" title="تبدیل رشته به آرایه char">تبدیل رشته به آرایه char</a><a href="https://oruji.github.io/java/char/convert/string/" class="anav" title="تبدیل آرایه char به رشته">تبدیل آرایه char به رشته</a><a class="anav" href="https://oruji.github.io/java/string/convert/date/" title="تبدیل رشته به تاریخ">تبدیل رشته به تاریخ</a><a class="anav" href="https://oruji.github.io/java/list/duplicate/count/" title="نحوه شمارش آیتم های تکراری در لیست">نحوه شمارش آیتم های تکراری در لیست</a><a class="anav" href="https://oruji.github.io/java/bufferedwriter/" title="نوشتن در فایل با BufferedWriter">نوشتن در فایل با BufferedWriter</a><a class="anav" href="https://oruji.github.io/java/bufferedreader/" title="خواندن فایل با BufferedReader">خواندن فایل با BufferedReader</a><a class="anav" href="https://oruji.github.io/java/enum/" title="Enum">Enum</a><a href="https://oruji.github.io/java/override/" class="anav" title="override">override</a><a href="https://oruji.github.io/java/overload/" class="anav" title="overload">overload</a><a href="https://oruji.github.io/java/polymorphism/" class="anav" title="چندریختی یا پلی مورفیسم">چندریختی یا پلی مورفیسم</a>            <a href="https://oruji.github.io/java/interface/" class="anav" title="اینترفیس (Interface)">اینترفیس (Interface)</a><a href="https://oruji.github.io/java/inherit/" class="anav" title="ارث بری یا وراثت (Inheritance)">ارث بری یا وراثت (Inheritance)</a><a href="https://oruji.github.io/java/abstract/" class="anav" title="انتزاعی سازی (Abstraction)">انتزاعی سازی (Abstraction)</a><a href="https://oruji.github.io/java/encapsulate/" class="anav" title="کپسوله سازی (Encapsulation)">کپسوله سازی (Encapsulation)</a><a href="https://oruji.github.io/java/serialize/" class="anav" title="سریالایز یا سریالیزه کردن (Serialization)">سریالایز یا سریالیزه کردن (Serialization)</a><a href="https://oruji.github.io/java/generic/" class="anav" title="Generic ها">Generic ها</a><a title="خواندن فایل XML" href="https://oruji.github.io/java/xml/read/" class="anav">خواندن فایل XML</a><a title="بدست آوردن رنکینگ الکسا" href="https://oruji.github.io/java/xml/alexa/" class="anav">بدست آوردن رنکینگ الکسا</a></nav>
<footer class="gradient">Copyright © 2024 - <a href="https://oruji.github.io/" title="آموزش آنلاین">oruji.github.io</a></footer></body>

</html>